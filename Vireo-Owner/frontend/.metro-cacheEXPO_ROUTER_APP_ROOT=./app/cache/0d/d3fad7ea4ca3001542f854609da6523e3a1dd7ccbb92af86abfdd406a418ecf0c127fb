{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":130,"column":36,"index":3989}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"./NativeReanimated","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"kdXdmgB8tl1AyJBO0GP3x3y+X7Q="}},{"name":"./shareables","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":118,"index":175}}],"key":"7y/kYaHtE0Ctd63J3aeCXZBZgN0="}},{"name":"./threads","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":176},"end":{"line":3,"column":36,"index":212}}],"key":"BbDCjcCMVFuwh70FIDUA22HfsJc="}},{"name":"./valueSetter","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":213},"end":{"line":4,"column":44,"index":257}}],"key":"j+JsydeRtD22yEjqix7Si633IFg="}},{"name":"./mappers","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":258},"end":{"line":5,"column":39,"index":297}}],"key":"LaW0R8w80BPXk939uNZHB641YRg="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.makeMutable = makeMutable;\n  exports.makeRemote = makeRemote;\n  exports.makeUIMutable = makeUIMutable;\n  Object.defineProperty(exports, \"stopMapper\", {\n    enumerable: true,\n    get: function get() {\n      return _mappers.stopMapper;\n    }\n  });\n  var _NativeReanimated = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"./NativeReanimated\"));\n  var _shareables = _$$_REQUIRE(_dependencyMap[2], \"./shareables\");\n  var _threads = _$$_REQUIRE(_dependencyMap[3], \"./threads\");\n  var _valueSetter = _$$_REQUIRE(_dependencyMap[4], \"./valueSetter\");\n  var _mappers = _$$_REQUIRE(_dependencyMap[5], \"./mappers\");\n  function makeUIMutable(initial, syncDataHolder) {\n    'worklet';\n\n    var listeners = new Map();\n    var value = initial;\n    var self = {\n      set value(newValue) {\n        (0, _valueSetter.valueSetter)(self, newValue);\n      },\n      get value() {\n        return value;\n      },\n      /**\n       * _value prop should only be accessed by the valueSetter implementation\n       * which may make the decision about updating the mutable value depending\n       * on the provided new value. All other places should only attempt to modify\n       * the mutable by assigning to value prop directly.\n       */\n      set _value(newValue) {\n        value = newValue;\n        if (syncDataHolder) {\n          _updateDataSynchronously(syncDataHolder, (0, _shareables.makeShareableCloneOnUIRecursive)(newValue));\n        }\n        listeners.forEach(function (listener) {\n          listener(newValue);\n        });\n      },\n      get _value() {\n        return value;\n      },\n      addListener: function addListener(id, listener) {\n        listeners.set(id, listener);\n      },\n      removeListener: function removeListener(id) {\n        listeners.delete(id);\n      },\n      _animation: null,\n      _isReanimatedSharedValue: true\n    };\n    return self;\n  }\n  function makeMutable(initial) {\n    var oneWayReadsOnly = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var value = initial;\n    var syncDataHolder;\n    if (!oneWayReadsOnly && _NativeReanimated.default.native) {\n      // updates are always synchronous when running on web or in Jest environment\n      syncDataHolder = _NativeReanimated.default.makeSynchronizedDataHolder((0, _shareables.makeShareableCloneRecursive)(value));\n      (0, _shareables.registerShareableMapping)(syncDataHolder);\n    }\n    var handle = (0, _shareables.makeShareableCloneRecursive)({\n      __init: function __init() {\n        'worklet';\n\n        return makeUIMutable(initial, syncDataHolder);\n      }\n    });\n    // listeners can only work on JS thread on Web and jest environments\n    var listeners = _NativeReanimated.default.native ? undefined : new Map();\n    var mutable = {\n      set value(newValue) {\n        if (_NativeReanimated.default.native) {\n          (0, _threads.runOnUI)(function () {\n            mutable.value = newValue;\n          })();\n        } else {\n          (0, _valueSetter.valueSetter)(mutable, newValue);\n        }\n      },\n      get value() {\n        if (syncDataHolder) {\n          return _NativeReanimated.default.getDataSynchronously(syncDataHolder);\n        }\n        return value;\n      },\n      set _value(newValue) {\n        if (_NativeReanimated.default.native) {\n          throw new Error('Setting `_value` directly is only possible on the UI runtime');\n        }\n        value = newValue;\n        listeners.forEach(function (listener) {\n          listener(newValue);\n        });\n      },\n      get _value() {\n        if (_NativeReanimated.default.native) {\n          throw new Error('Reading from `_value` directly is only possible on the UI runtime');\n        }\n        return value;\n      },\n      modify: function modify(modifier) {\n        (0, _threads.runOnUI)(function () {\n          mutable.value = modifier(mutable.value);\n        })();\n      },\n      addListener: function addListener(id, listener) {\n        if (_NativeReanimated.default.native) {\n          throw new Error('adding listeners is only possible on the UI runtime');\n        }\n        listeners.set(id, listener);\n      },\n      removeListener: function removeListener(id) {\n        if (_NativeReanimated.default.native) {\n          throw new Error('removing listeners is only possible on the UI runtime');\n        }\n        listeners.delete(id);\n      },\n      _isReanimatedSharedValue: true\n    };\n    (0, _shareables.registerShareableMapping)(mutable, handle);\n    return mutable;\n  }\n  function makeRemote() {\n    var initial = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var handle = (0, _shareables.makeShareableCloneRecursive)({\n      __init: function __init() {\n        'worklet';\n\n        return initial;\n      }\n    });\n    (0, _shareables.registerShareableMapping)(initial, handle);\n    return initial;\n  }\n});","lineCount":144,"map":[[15,2,1,0],[15,6,1,0,"_NativeReanimated"],[15,23,1,0],[15,26,1,0,"_interopRequireDefault"],[15,48,1,0],[15,49,1,0,"_$$_REQUIRE"],[15,60,1,0],[15,61,1,0,"_dependencyMap"],[15,75,1,0],[16,2,2,0],[16,6,2,0,"_shareables"],[16,17,2,0],[16,20,2,0,"_$$_REQUIRE"],[16,31,2,0],[16,32,2,0,"_dependencyMap"],[16,46,2,0],[17,2,3,0],[17,6,3,0,"_threads"],[17,14,3,0],[17,17,3,0,"_$$_REQUIRE"],[17,28,3,0],[17,29,3,0,"_dependencyMap"],[17,43,3,0],[18,2,4,0],[18,6,4,0,"_valueSetter"],[18,18,4,0],[18,21,4,0,"_$$_REQUIRE"],[18,32,4,0],[18,33,4,0,"_dependencyMap"],[18,47,4,0],[19,2,5,0],[19,6,5,0,"_mappers"],[19,14,5,0],[19,17,5,0,"_$$_REQUIRE"],[19,28,5,0],[19,29,5,0,"_dependencyMap"],[19,43,5,0],[20,2,6,7],[20,11,6,16,"makeUIMutable"],[20,24,6,29,"makeUIMutable"],[20,25,6,30,"initial"],[20,32,6,37],[20,34,6,39,"syncDataHolder"],[20,48,6,53],[20,50,6,55],[21,4,7,2],[21,13,7,11],[23,4,9,2],[23,8,9,8,"listeners"],[23,17,9,17],[23,20,9,20],[23,24,9,24,"Map"],[23,27,9,27],[23,28,9,28],[23,29,9,29],[24,4,10,2],[24,8,10,6,"value"],[24,13,10,11],[24,16,10,14,"initial"],[24,23,10,21],[25,4,11,2],[25,8,11,8,"self"],[25,12,11,12],[25,15,11,15],[26,6,12,4],[26,10,12,8,"value"],[26,15,12,13,"value"],[26,16,12,14,"newValue"],[26,24,12,22],[26,26,12,24],[27,8,13,6],[27,12,13,6,"valueSetter"],[27,36,13,17],[27,38,13,18,"self"],[27,42,13,22],[27,44,13,24,"newValue"],[27,52,13,32],[27,53,13,33],[28,6,14,4],[28,7,14,5],[29,6,15,4],[29,10,15,8,"value"],[29,15,15,13,"value"],[29,16,15,13],[29,18,15,16],[30,8,16,6],[30,15,16,13,"value"],[30,20,16,18],[31,6,17,4],[31,7,17,5],[32,6,18,4],[33,0,19,0],[34,0,20,0],[35,0,21,0],[36,0,22,0],[37,0,23,0],[38,6,24,4],[38,10,24,8,"_value"],[38,16,24,14,"_value"],[38,17,24,15,"newValue"],[38,25,24,23],[38,27,24,25],[39,8,25,6,"value"],[39,13,25,11],[39,16,25,14,"newValue"],[39,24,25,22],[40,8,26,6],[40,12,26,10,"syncDataHolder"],[40,26,26,24],[40,28,26,26],[41,10,27,8,"_updateDataSynchronously"],[41,34,27,32],[41,35,27,33,"syncDataHolder"],[41,49,27,47],[41,51,27,49],[41,55,27,49,"makeShareableCloneOnUIRecursive"],[41,98,27,80],[41,100,27,81,"newValue"],[41,108,27,89],[41,109,27,90],[41,110,27,91],[42,8,28,6],[43,8,29,6,"listeners"],[43,17,29,15],[43,18,29,16,"forEach"],[43,25,29,23],[43,26,29,24],[43,36,29,24,"listener"],[43,44,29,32],[43,46,29,36],[44,10,30,8,"listener"],[44,18,30,16],[44,19,30,17,"newValue"],[44,27,30,25],[44,28,30,26],[45,8,31,6],[45,9,31,7],[45,10,31,8],[46,6,32,4],[46,7,32,5],[47,6,33,4],[47,10,33,8,"_value"],[47,16,33,14,"_value"],[47,17,33,14],[47,19,33,17],[48,8,34,6],[48,15,34,13,"value"],[48,20,34,18],[49,6,35,4],[49,7,35,5],[50,6,36,4,"addListener"],[50,17,36,15],[50,19,36,17],[50,28,36,4,"addListener"],[50,39,36,15,"addListener"],[50,40,36,18,"id"],[50,42,36,20],[50,44,36,22,"listener"],[50,52,36,30],[50,54,36,35],[51,8,37,6,"listeners"],[51,17,37,15],[51,18,37,16,"set"],[51,21,37,19],[51,22,37,20,"id"],[51,24,37,22],[51,26,37,24,"listener"],[51,34,37,32],[51,35,37,33],[52,6,38,4],[52,7,38,5],[53,6,39,4,"removeListener"],[53,20,39,18],[53,22,39,20],[53,31,39,4,"removeListener"],[53,45,39,18,"removeListener"],[53,46,39,20,"id"],[53,48,39,22],[53,50,39,26],[54,8,40,6,"listeners"],[54,17,40,15],[54,18,40,16,"delete"],[54,24,40,22],[54,25,40,23,"id"],[54,27,40,25],[54,28,40,26],[55,6,41,4],[55,7,41,5],[56,6,42,4,"_animation"],[56,16,42,14],[56,18,42,16],[56,22,42,20],[57,6,43,4,"_isReanimatedSharedValue"],[57,30,43,28],[57,32,43,30],[58,4,44,2],[58,5,44,3],[59,4,45,2],[59,11,45,9,"self"],[59,15,45,13],[60,2,46,0],[61,2,47,7],[61,11,47,16,"makeMutable"],[61,22,47,27,"makeMutable"],[61,23,47,28,"initial"],[61,30,47,35],[61,32,47,37],[62,4,48,2],[62,8,48,6,"oneWayReadsOnly"],[62,23,48,21],[62,26,48,24,"arguments"],[62,35,48,33],[62,36,48,34,"length"],[62,42,48,40],[62,45,48,43],[62,46,48,44],[62,50,48,48,"arguments"],[62,59,48,57],[62,60,48,58],[62,61,48,59],[62,62,48,60],[62,67,48,65,"undefined"],[62,76,48,74],[62,79,48,77,"arguments"],[62,88,48,86],[62,89,48,87],[62,90,48,88],[62,91,48,89],[62,94,48,92],[62,99,48,97],[63,4,49,2],[63,8,49,6,"value"],[63,13,49,11],[63,16,49,14,"initial"],[63,23,49,21],[64,4,50,2],[64,8,50,6,"syncDataHolder"],[64,22,50,20],[65,4,51,2],[65,8,51,6],[65,9,51,7,"oneWayReadsOnly"],[65,24,51,22],[65,28,51,26,"NativeReanimatedModule"],[65,53,51,48],[65,54,51,49,"native"],[65,60,51,55],[65,62,51,57],[66,6,52,4],[67,6,53,4,"syncDataHolder"],[67,20,53,18],[67,23,53,21,"NativeReanimatedModule"],[67,48,53,43],[67,49,53,44,"makeSynchronizedDataHolder"],[67,75,53,70],[67,76,53,71],[67,80,53,71,"makeShareableCloneRecursive"],[67,119,53,98],[67,121,53,99,"value"],[67,126,53,104],[67,127,53,105],[67,128,53,106],[68,6,54,4],[68,10,54,4,"registerShareableMapping"],[68,46,54,28],[68,48,54,29,"syncDataHolder"],[68,62,54,43],[68,63,54,44],[69,4,55,2],[70,4,56,2],[70,8,56,8,"handle"],[70,14,56,14],[70,17,56,17],[70,21,56,17,"makeShareableCloneRecursive"],[70,60,56,44],[70,62,56,45],[71,6,57,4,"__init"],[71,12,57,10],[71,14,57,12],[71,23,57,4,"__init"],[71,29,57,10,"__init"],[71,30,57,10],[71,32,57,18],[72,8,58,6],[72,17,58,15],[74,8,60,6],[74,15,60,13,"makeUIMutable"],[74,28,60,26],[74,29,60,27,"initial"],[74,36,60,34],[74,38,60,36,"syncDataHolder"],[74,52,60,50],[74,53,60,51],[75,6,61,4],[76,4,62,2],[76,5,62,3],[76,6,62,4],[77,4,63,2],[78,4,64,2],[78,8,64,8,"listeners"],[78,17,64,17],[78,20,64,20,"NativeReanimatedModule"],[78,45,64,42],[78,46,64,43,"native"],[78,52,64,49],[78,55,64,52,"undefined"],[78,64,64,61],[78,67,64,64],[78,71,64,68,"Map"],[78,74,64,71],[78,75,64,72],[78,76,64,73],[79,4,65,2],[79,8,65,8,"mutable"],[79,15,65,15],[79,18,65,18],[80,6,66,4],[80,10,66,8,"value"],[80,15,66,13,"value"],[80,16,66,14,"newValue"],[80,24,66,22],[80,26,66,24],[81,8,67,6],[81,12,67,10,"NativeReanimatedModule"],[81,37,67,32],[81,38,67,33,"native"],[81,44,67,39],[81,46,67,41],[82,10,68,8],[82,14,68,8,"runOnUI"],[82,30,68,15],[82,32,68,16],[82,44,68,22],[83,12,69,10,"mutable"],[83,19,69,17],[83,20,69,18,"value"],[83,25,69,23],[83,28,69,26,"newValue"],[83,36,69,34],[84,10,70,8],[84,11,70,9],[84,12,70,10],[84,13,70,11],[84,14,70,12],[85,8,71,6],[85,9,71,7],[85,15,71,13],[86,10,72,8],[86,14,72,8,"valueSetter"],[86,38,72,19],[86,40,72,20,"mutable"],[86,47,72,27],[86,49,72,29,"newValue"],[86,57,72,37],[86,58,72,38],[87,8,73,6],[88,6,74,4],[88,7,74,5],[89,6,75,4],[89,10,75,8,"value"],[89,15,75,13,"value"],[89,16,75,13],[89,18,75,16],[90,8,76,6],[90,12,76,10,"syncDataHolder"],[90,26,76,24],[90,28,76,26],[91,10,77,8],[91,17,77,15,"NativeReanimatedModule"],[91,42,77,37],[91,43,77,38,"getDataSynchronously"],[91,63,77,58],[91,64,77,59,"syncDataHolder"],[91,78,77,73],[91,79,77,74],[92,8,78,6],[93,8,79,6],[93,15,79,13,"value"],[93,20,79,18],[94,6,80,4],[94,7,80,5],[95,6,81,4],[95,10,81,8,"_value"],[95,16,81,14,"_value"],[95,17,81,15,"newValue"],[95,25,81,23],[95,27,81,25],[96,8,82,6],[96,12,82,10,"NativeReanimatedModule"],[96,37,82,32],[96,38,82,33,"native"],[96,44,82,39],[96,46,82,41],[97,10,83,8],[97,16,83,14],[97,20,83,18,"Error"],[97,25,83,23],[97,26,83,24],[97,88,83,86],[97,89,83,87],[98,8,84,6],[99,8,85,6,"value"],[99,13,85,11],[99,16,85,14,"newValue"],[99,24,85,22],[100,8,86,6,"listeners"],[100,17,86,15],[100,18,86,16,"forEach"],[100,25,86,23],[100,26,86,24],[100,36,86,24,"listener"],[100,44,86,32],[100,46,86,36],[101,10,87,8,"listener"],[101,18,87,16],[101,19,87,17,"newValue"],[101,27,87,25],[101,28,87,26],[102,8,88,6],[102,9,88,7],[102,10,88,8],[103,6,89,4],[103,7,89,5],[104,6,90,4],[104,10,90,8,"_value"],[104,16,90,14,"_value"],[104,17,90,14],[104,19,90,17],[105,8,91,6],[105,12,91,10,"NativeReanimatedModule"],[105,37,91,32],[105,38,91,33,"native"],[105,44,91,39],[105,46,91,41],[106,10,92,8],[106,16,92,14],[106,20,92,18,"Error"],[106,25,92,23],[106,26,92,24],[106,93,92,91],[106,94,92,92],[107,8,93,6],[108,8,94,6],[108,15,94,13,"value"],[108,20,94,18],[109,6,95,4],[109,7,95,5],[110,6,96,4,"modify"],[110,12,96,10],[110,14,96,12],[110,23,96,4,"modify"],[110,29,96,10,"modify"],[110,30,96,12,"modifier"],[110,38,96,20],[110,40,96,24],[111,8,97,6],[111,12,97,6,"runOnUI"],[111,28,97,13],[111,30,97,14],[111,42,97,20],[112,10,98,8,"mutable"],[112,17,98,15],[112,18,98,16,"value"],[112,23,98,21],[112,26,98,24,"modifier"],[112,34,98,32],[112,35,98,33,"mutable"],[112,42,98,40],[112,43,98,41,"value"],[112,48,98,46],[112,49,98,47],[113,8,99,6],[113,9,99,7],[113,10,99,8],[113,11,99,9],[113,12,99,10],[114,6,100,4],[114,7,100,5],[115,6,101,4,"addListener"],[115,17,101,15],[115,19,101,17],[115,28,101,4,"addListener"],[115,39,101,15,"addListener"],[115,40,101,18,"id"],[115,42,101,20],[115,44,101,22,"listener"],[115,52,101,30],[115,54,101,35],[116,8,102,6],[116,12,102,10,"NativeReanimatedModule"],[116,37,102,32],[116,38,102,33,"native"],[116,44,102,39],[116,46,102,41],[117,10,103,8],[117,16,103,14],[117,20,103,18,"Error"],[117,25,103,23],[117,26,103,24],[117,79,103,77],[117,80,103,78],[118,8,104,6],[119,8,105,6,"listeners"],[119,17,105,15],[119,18,105,16,"set"],[119,21,105,19],[119,22,105,20,"id"],[119,24,105,22],[119,26,105,24,"listener"],[119,34,105,32],[119,35,105,33],[120,6,106,4],[120,7,106,5],[121,6,107,4,"removeListener"],[121,20,107,18],[121,22,107,20],[121,31,107,4,"removeListener"],[121,45,107,18,"removeListener"],[121,46,107,20,"id"],[121,48,107,22],[121,50,107,26],[122,8,108,6],[122,12,108,10,"NativeReanimatedModule"],[122,37,108,32],[122,38,108,33,"native"],[122,44,108,39],[122,46,108,41],[123,10,109,8],[123,16,109,14],[123,20,109,18,"Error"],[123,25,109,23],[123,26,109,24],[123,81,109,79],[123,82,109,80],[124,8,110,6],[125,8,111,6,"listeners"],[125,17,111,15],[125,18,111,16,"delete"],[125,24,111,22],[125,25,111,23,"id"],[125,27,111,25],[125,28,111,26],[126,6,112,4],[126,7,112,5],[127,6,113,4,"_isReanimatedSharedValue"],[127,30,113,28],[127,32,113,30],[128,4,114,2],[128,5,114,3],[129,4,115,2],[129,8,115,2,"registerShareableMapping"],[129,44,115,26],[129,46,115,27,"mutable"],[129,53,115,34],[129,55,115,36,"handle"],[129,61,115,42],[129,62,115,43],[130,4,116,2],[130,11,116,9,"mutable"],[130,18,116,16],[131,2,117,0],[132,2,118,7],[132,11,118,16,"makeRemote"],[132,21,118,26,"makeRemote"],[132,22,118,26],[132,24,118,29],[133,4,119,2],[133,8,119,6,"initial"],[133,15,119,13],[133,18,119,16,"arguments"],[133,27,119,25],[133,28,119,26,"length"],[133,34,119,32],[133,37,119,35],[133,38,119,36],[133,42,119,40,"arguments"],[133,51,119,49],[133,52,119,50],[133,53,119,51],[133,54,119,52],[133,59,119,57,"undefined"],[133,68,119,66],[133,71,119,69,"arguments"],[133,80,119,78],[133,81,119,79],[133,82,119,80],[133,83,119,81],[133,86,119,84],[133,87,119,85],[133,88,119,86],[134,4,120,2],[134,8,120,8,"handle"],[134,14,120,14],[134,17,120,17],[134,21,120,17,"makeShareableCloneRecursive"],[134,60,120,44],[134,62,120,45],[135,6,121,4,"__init"],[135,12,121,10],[135,14,121,12],[135,23,121,4,"__init"],[135,29,121,10,"__init"],[135,30,121,10],[135,32,121,18],[136,8,122,6],[136,17,122,15],[138,8,124,6],[138,15,124,13,"initial"],[138,22,124,20],[139,6,125,4],[140,4,126,2],[140,5,126,3],[140,6,126,4],[141,4,127,2],[141,8,127,2,"registerShareableMapping"],[141,44,127,26],[141,46,127,27,"initial"],[141,53,127,34],[141,55,127,36,"handle"],[141,61,127,42],[141,62,127,43],[142,4,128,2],[142,11,128,9,"initial"],[142,18,128,16],[143,2,129,0],[144,0,129,1]],"functionMap":{"names":["<global>","makeUIMutable","self.set__value","self.get__value","self.set___value","listeners.forEach$argument_0","self.get___value","self.addListener","self.removeListener","makeMutable","makeShareableCloneRecursive$argument_0.__init","mutable.set__value","runOnUI$argument_0","mutable.get__value","mutable.set___value","mutable.get___value","mutable.modify","mutable.addListener","mutable.removeListener","makeRemote"],"mappings":"AAA;OCK;ICM;KDE;IEC;KFE;IGO;wBCK;ODE;KHC;IKC;KLE;iBMC;KNE;oBOC;KPE;CDK;OSC;YCU;KDI;IEK;gBCE;SDE;KFI;IIC;KJK;IKC;wBTK;OSE;KLC;IMC;KNK;YOC;cJC;OIE;KPC;iBQC;KRK;oBSC;KTK;CTK;OmBC;YTG;KSI;CnBI"}},"type":"js/module"}]}