{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":41,"column":47,"index":1672}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/toConsumableArray","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":41,"column":47,"index":1672}}],"key":"XnmB3YjhLQUu4Gtg+kalDAx6bCo="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"../core","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":50,"index":93}}],"key":"VLk+qcyrxDAPvpn7SWZ7jlIDVZM="}},{"name":"../PlatformChecker","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":52,"index":146}}],"key":"o5sboqx6ZsiO/hfdUrPq1R4MouM="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAnimatedReaction = useAnimatedReaction;\n  var _toConsumableArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/toConsumableArray\"));\n  var _react = _$$_REQUIRE(_dependencyMap[2], \"react\");\n  var _core = _$$_REQUIRE(_dependencyMap[3], \"../core\");\n  var _PlatformChecker = _$$_REQUIRE(_dependencyMap[4], \"../PlatformChecker\");\n  /**\n   * @param prepare - worklet used for data preparation for the second parameter\n   * @param react - worklet which takes data prepared by the one in the first parameter and performs certain actions\n   * the first worklet defines the inputs, in other words on which shared values change will it be called.\n   * the second one can modify any shared values but those which are mentioned in the first worklet. Beware of that, because this may result in endless loop and high cpu usage.\n   */\n  function useAnimatedReaction(prepare, react, dependencies) {\n    var _prepare$_closure;\n    var previous = (0, _react.useRef)({\n      value: null\n    }).current;\n    var inputs = Object.values((_prepare$_closure = prepare._closure) != null ? _prepare$_closure : {});\n    if ((0, _PlatformChecker.shouldBeUseWeb)()) {\n      var _dependencies;\n      if (!inputs.length && (_dependencies = dependencies) !== null && _dependencies !== void 0 && _dependencies.length) {\n        // let web work without a Babel/SWC plugin\n        inputs = dependencies;\n      }\n    }\n    if (dependencies === undefined) {\n      var _prepare$_closure2, _react$_closure;\n      dependencies = [].concat((0, _toConsumableArray2.default)(Object.values((_prepare$_closure2 = prepare._closure) != null ? _prepare$_closure2 : {})), (0, _toConsumableArray2.default)(Object.values((_react$_closure = react._closure) != null ? _react$_closure : {})), [prepare.__workletHash, react.__workletHash]);\n    } else {\n      dependencies.push(prepare.__workletHash, react.__workletHash);\n    }\n    (0, _react.useEffect)(function () {\n      var fun = function fun() {\n        'worklet';\n\n        var input = prepare();\n        react(input, previous.value);\n        previous.value = input;\n      };\n      var mapperId = (0, _core.startMapper)(fun, inputs, []);\n      return function () {\n        (0, _core.stopMapper)(mapperId);\n      };\n    }, dependencies);\n  }\n});","lineCount":50,"map":[[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"_$$_REQUIRE"],[8,26,1,0],[8,27,1,0,"_dependencyMap"],[8,41,1,0],[9,2,2,0],[9,6,2,0,"_core"],[9,11,2,0],[9,14,2,0,"_$$_REQUIRE"],[9,25,2,0],[9,26,2,0,"_dependencyMap"],[9,40,2,0],[10,2,3,0],[10,6,3,0,"_PlatformChecker"],[10,22,3,0],[10,25,3,0,"_$$_REQUIRE"],[10,36,3,0],[10,37,3,0,"_dependencyMap"],[10,51,3,0],[11,2,4,0],[12,0,5,0],[13,0,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,2,10,7],[17,11,10,16,"useAnimatedReaction"],[17,30,10,35,"useAnimatedReaction"],[17,31,10,36,"prepare"],[17,38,10,43],[17,40,10,45,"react"],[17,45,10,50],[17,47,10,52,"dependencies"],[17,59,10,64],[17,61,10,66],[18,4,10,66],[18,8,10,66,"_prepare$_closure"],[18,25,10,66],[19,4,11,2],[19,8,11,8,"previous"],[19,16,11,16],[19,19,11,19],[19,23,11,19,"useRef"],[19,36,11,25],[19,38,11,26],[20,6,12,4,"value"],[20,11,12,9],[20,13,12,11],[21,4,13,2],[21,5,13,3],[21,6,13,4],[21,7,13,5,"current"],[21,14,13,12],[22,4,14,2],[22,8,14,6,"inputs"],[22,14,14,12],[22,17,14,15,"Object"],[22,23,14,21],[22,24,14,22,"values"],[22,30,14,28],[22,32,14,28,"_prepare$_closure"],[22,49,14,28],[22,52,14,29,"prepare"],[22,59,14,36],[22,60,14,37,"_closure"],[22,68,14,45],[22,80,14,45,"_prepare$_closure"],[22,97,14,45],[22,100,14,49],[22,101,14,50],[22,102,14,51],[22,103,14,52],[23,4,15,2],[23,8,15,6],[23,12,15,6,"shouldBeUseWeb"],[23,43,15,20],[23,45,15,21],[23,46,15,22],[23,48,15,24],[24,6,16,4],[24,10,16,8,"_dependencies"],[24,23,16,21],[25,6,17,4],[25,10,17,8],[25,11,17,9,"inputs"],[25,17,17,15],[25,18,17,16,"length"],[25,24,17,22],[25,28,17,26],[25,29,17,27,"_dependencies"],[25,42,17,40],[25,45,17,43,"dependencies"],[25,57,17,55],[25,63,17,61],[25,67,17,65],[25,71,17,69,"_dependencies"],[25,84,17,82],[25,89,17,87],[25,94,17,92],[25,95,17,93],[25,99,17,97,"_dependencies"],[25,112,17,110],[25,113,17,111,"length"],[25,119,17,117],[25,121,17,119],[26,8,18,6],[27,8,19,6,"inputs"],[27,14,19,12],[27,17,19,15,"dependencies"],[27,29,19,27],[28,6,20,4],[29,4,21,2],[30,4,22,2],[30,8,22,6,"dependencies"],[30,20,22,18],[30,25,22,23,"undefined"],[30,34,22,32],[30,36,22,34],[31,6,22,34],[31,10,22,34,"_prepare$_closure2"],[31,28,22,34],[31,30,22,34,"_react$_closure"],[31,45,22,34],[32,6,23,4,"dependencies"],[32,18,23,16],[32,24,23,16,"concat"],[32,30,23,16],[32,35,23,16,"_toConsumableArray2"],[32,54,23,16],[32,55,23,16,"default"],[32,62,23,16],[32,64,23,23,"Object"],[32,70,23,29],[32,71,23,30,"values"],[32,77,23,36],[32,79,23,36,"_prepare$_closure2"],[32,97,23,36],[32,100,23,37,"prepare"],[32,107,23,44],[32,108,23,45,"_closure"],[32,116,23,53],[32,128,23,53,"_prepare$_closure2"],[32,146,23,53],[32,149,23,57],[32,150,23,58],[32,151,23,59],[32,152,23,60],[32,159,23,60,"_toConsumableArray2"],[32,178,23,60],[32,179,23,60,"default"],[32,186,23,60],[32,188,23,65,"Object"],[32,194,23,71],[32,195,23,72,"values"],[32,201,23,78],[32,203,23,78,"_react$_closure"],[32,218,23,78],[32,221,23,79,"react"],[32,226,23,84],[32,227,23,85,"_closure"],[32,235,23,93],[32,247,23,93,"_react$_closure"],[32,262,23,93],[32,265,23,97],[32,266,23,98],[32,267,23,99],[32,268,23,100],[32,272,23,102,"prepare"],[32,279,23,109],[32,280,23,110,"__workletHash"],[32,293,23,123],[32,295,23,125,"react"],[32,300,23,130],[32,301,23,131,"__workletHash"],[32,314,23,144],[32,316,23,145],[33,4,24,2],[33,5,24,3],[33,11,24,9],[34,6,25,4,"dependencies"],[34,18,25,16],[34,19,25,17,"push"],[34,23,25,21],[34,24,25,22,"prepare"],[34,31,25,29],[34,32,25,30,"__workletHash"],[34,45,25,43],[34,47,25,45,"react"],[34,52,25,50],[34,53,25,51,"__workletHash"],[34,66,25,64],[34,67,25,65],[35,4,26,2],[36,4,27,2],[36,8,27,2,"useEffect"],[36,24,27,11],[36,26,27,12],[36,38,27,18],[37,6,28,4],[37,10,28,10,"fun"],[37,13,28,13],[37,16,28,16],[37,25,28,10,"fun"],[37,28,28,13,"fun"],[37,29,28,13],[37,31,28,22],[38,8,29,6],[38,17,29,15],[40,8,31,6],[40,12,31,12,"input"],[40,17,31,17],[40,20,31,20,"prepare"],[40,27,31,27],[40,28,31,28],[40,29,31,29],[41,8,32,6,"react"],[41,13,32,11],[41,14,32,12,"input"],[41,19,32,17],[41,21,32,19,"previous"],[41,29,32,27],[41,30,32,28,"value"],[41,35,32,33],[41,36,32,34],[42,8,33,6,"previous"],[42,16,33,14],[42,17,33,15,"value"],[42,22,33,20],[42,25,33,23,"input"],[42,30,33,28],[43,6,34,4],[43,7,34,5],[44,6,35,4],[44,10,35,10,"mapperId"],[44,18,35,18],[44,21,35,21],[44,25,35,21,"startMapper"],[44,42,35,32],[44,44,35,33,"fun"],[44,47,35,36],[44,49,35,38,"inputs"],[44,55,35,44],[44,57,35,46],[44,59,35,48],[44,60,35,49],[45,6,36,4],[45,13,36,11],[45,25,36,17],[46,8,37,6],[46,12,37,6,"stopMapper"],[46,28,37,16],[46,30,37,17,"mapperId"],[46,38,37,25],[46,39,37,26],[47,6,38,4],[47,7,38,5],[48,4,39,2],[48,5,39,3],[48,7,39,5,"dependencies"],[48,19,39,17],[48,20,39,18],[49,2,40,0],[50,0,40,1]],"functionMap":{"names":["<global>","useAnimatedReaction","useEffect$argument_0","fun","<anonymous>"],"mappings":"AAA;OCS;YCiB;gBCC;KDM;WEE;KFE;GDC;CDC"}},"type":"js/module"}]}