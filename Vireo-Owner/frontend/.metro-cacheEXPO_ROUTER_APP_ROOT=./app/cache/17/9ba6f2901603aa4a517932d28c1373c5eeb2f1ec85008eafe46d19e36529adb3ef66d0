{"dependencies":[{"name":"../../handlersRegistry","data":{"asyncType":null,"locs":[{"start":{"line":8,"column":24,"index":146},"end":{"line":8,"column":57,"index":179}}],"key":"pP2b75vhlUpyLI3+QI+xq/8ysKA="}},{"name":"../../../RNGestureHandlerModule","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":53,"index":235},"end":{"line":10,"column":95,"index":277}}],"key":"HKrZDPbCxSQpkTuwNBEzcur/N4c="}},{"name":"../../utils","data":{"asyncType":null,"locs":[{"start":{"line":12,"column":13,"index":294},"end":{"line":12,"column":35,"index":316}}],"key":"dxL+BeUilKexbwMi0xaswBTAv3A="}},{"name":"../../../ghQueueMicrotask","data":{"asyncType":null,"locs":[{"start":{"line":14,"column":24,"index":343},"end":{"line":14,"column":60,"index":379}}],"key":"hrYLKIqWIfT+pKNINxKM7/Pt38o="}},{"name":"./utils","data":{"asyncType":null,"locs":[{"start":{"line":16,"column":14,"index":396},"end":{"line":16,"column":32,"index":414}}],"key":"FH4oXkS7WdR5kG0v+Eku8TWcu80="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.updateHandlers = updateHandlers;\n  var _handlersRegistry = _$$_REQUIRE(_dependencyMap[0], \"../../handlersRegistry\");\n  var _RNGestureHandlerModule = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"../../../RNGestureHandlerModule\"));\n  var _utils = _$$_REQUIRE(_dependencyMap[2], \"../../utils\");\n  var _ghQueueMicrotask = _$$_REQUIRE(_dependencyMap[3], \"../../../ghQueueMicrotask\");\n  var _utils2 = _$$_REQUIRE(_dependencyMap[4], \"./utils\");\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  function updateHandlers(preparedGesture, gestureConfig, newGestures) {\n    gestureConfig.prepare();\n    for (var i = 0; i < newGestures.length; i++) {\n      var handler = preparedGesture.attachedGestures[i];\n      (0, _utils2.checkGestureCallbacksForWorklets)(handler); // Only update handlerTag when it's actually different, it may be the same\n      // if gesture config object is wrapped with useMemo\n\n      if (newGestures[i].handlerTag !== handler.handlerTag) {\n        newGestures[i].handlerTag = handler.handlerTag;\n        newGestures[i].handlers.handlerTag = handler.handlerTag;\n      }\n    } // Use queueMicrotask to extract handlerTags, because when it's ran, all refs should be updated\n    // and handlerTags in BaseGesture references should be updated in the loop above (we need to wait\n    // in case of external relations)\n\n    (0, _ghQueueMicrotask.ghQueueMicrotask)(function () {\n      if (!preparedGesture.isMounted) {\n        return;\n      } // If amount of gesture configs changes, we need to update the callbacks in shared value\n\n      var shouldUpdateSharedValueIfUsed = preparedGesture.attachedGestures.length !== newGestures.length;\n      for (var _i = 0; _i < newGestures.length; _i++) {\n        var _handler = preparedGesture.attachedGestures[_i]; // If the gestureId is different (gesture isn't wrapped with useMemo or its dependencies changed),\n        // we need to update the shared value, assuming the gesture runs on UI thread or the thread changed\n\n        if (_handler.handlers.gestureId !== newGestures[_i].handlers.gestureId && (newGestures[_i].shouldUseReanimated || _handler.shouldUseReanimated)) {\n          shouldUpdateSharedValueIfUsed = true;\n        }\n        _handler.config = newGestures[_i].config;\n        _handler.handlers = newGestures[_i].handlers;\n        _RNGestureHandlerModule.default.updateGestureHandler(_handler.handlerTag, (0, _utils.filterConfig)(_handler.config, _utils2.ALLOWED_PROPS, (0, _utils2.extractGestureRelations)(_handler)));\n        (0, _handlersRegistry.registerHandler)(_handler.handlerTag, _handler, _handler.config.testId);\n      }\n      if (preparedGesture.animatedHandlers && shouldUpdateSharedValueIfUsed) {\n        var newHandlersValue = preparedGesture.attachedGestures.filter(function (g) {\n          return g.shouldUseReanimated;\n        }) // Ignore gestures that shouldn't run on UI\n        .map(function (g) {\n          return g.handlers;\n        });\n        preparedGesture.animatedHandlers.value = newHandlersValue;\n      }\n      (0, _utils.scheduleFlushOperations)();\n    });\n  }\n});","lineCount":63,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"updateHandlers"],[7,24,6,22],[7,27,6,25,"updateHandlers"],[7,41,6,39],[8,2,8,0],[8,6,8,4,"_handlersRegistry"],[8,23,8,21],[8,26,8,24,"require"],[8,37,8,31],[8,38,8,31,"_dependencyMap"],[8,52,8,31],[8,81,8,56],[8,82,8,57],[9,2,10,0],[9,6,10,4,"_RNGestureHandlerModule"],[9,29,10,27],[9,32,10,30,"_interopRequireDefault"],[9,54,10,52],[9,55,10,53,"require"],[9,66,10,60],[9,67,10,60,"_dependencyMap"],[9,81,10,60],[9,119,10,94],[9,120,10,95],[9,121,10,96],[10,2,12,0],[10,6,12,4,"_utils"],[10,12,12,10],[10,15,12,13,"require"],[10,26,12,20],[10,27,12,20,"_dependencyMap"],[10,41,12,20],[10,59,12,34],[10,60,12,35],[11,2,14,0],[11,6,14,4,"_ghQueueMicrotask"],[11,23,14,21],[11,26,14,24,"require"],[11,37,14,31],[11,38,14,31,"_dependencyMap"],[11,52,14,31],[11,84,14,59],[11,85,14,60],[12,2,16,0],[12,6,16,4,"_utils2"],[12,13,16,11],[12,16,16,14,"require"],[12,27,16,21],[12,28,16,21,"_dependencyMap"],[12,42,16,21],[12,56,16,31],[12,57,16,32],[13,2,18,0],[13,11,18,9,"_interopRequireDefault"],[13,33,18,31,"_interopRequireDefault"],[13,34,18,32,"obj"],[13,37,18,35],[13,39,18,37],[14,4,18,39],[14,11,18,46,"obj"],[14,14,18,49],[14,18,18,53,"obj"],[14,21,18,56],[14,22,18,57,"__esModule"],[14,32,18,67],[14,35,18,70,"obj"],[14,38,18,73],[14,41,18,76],[15,6,18,78,"default"],[15,13,18,85],[15,15,18,87,"obj"],[16,4,18,91],[16,5,18,92],[17,2,18,94],[18,2,20,0],[18,11,20,9,"updateHandlers"],[18,25,20,23,"updateHandlers"],[18,26,20,24,"preparedGesture"],[18,41,20,39],[18,43,20,41,"gestureConfig"],[18,56,20,54],[18,58,20,56,"newGestures"],[18,69,20,67],[18,71,20,69],[19,4,21,2,"gestureConfig"],[19,17,21,15],[19,18,21,16,"prepare"],[19,25,21,23],[19,26,21,24],[19,27,21,25],[20,4,23,2],[20,9,23,7],[20,13,23,11,"i"],[20,14,23,12],[20,17,23,15],[20,18,23,16],[20,20,23,18,"i"],[20,21,23,19],[20,24,23,22,"newGestures"],[20,35,23,33],[20,36,23,34,"length"],[20,42,23,40],[20,44,23,42,"i"],[20,45,23,43],[20,47,23,45],[20,49,23,47],[21,6,24,4],[21,10,24,10,"handler"],[21,17,24,17],[21,20,24,20,"preparedGesture"],[21,35,24,35],[21,36,24,36,"attachedGestures"],[21,52,24,52],[21,53,24,53,"i"],[21,54,24,54],[21,55,24,55],[22,6,25,4],[22,7,25,5],[22,8,25,6],[22,10,25,8,"_utils2"],[22,17,25,15],[22,18,25,16,"checkGestureCallbacksForWorklets"],[22,50,25,48],[22,52,25,50,"handler"],[22,59,25,57],[22,60,25,58],[22,61,25,59],[22,62,25,60],[23,6,26,4],[25,6,28,4],[25,10,28,8,"newGestures"],[25,21,28,19],[25,22,28,20,"i"],[25,23,28,21],[25,24,28,22],[25,25,28,23,"handlerTag"],[25,35,28,33],[25,40,28,38,"handler"],[25,47,28,45],[25,48,28,46,"handlerTag"],[25,58,28,56],[25,60,28,58],[26,8,29,6,"newGestures"],[26,19,29,17],[26,20,29,18,"i"],[26,21,29,19],[26,22,29,20],[26,23,29,21,"handlerTag"],[26,33,29,31],[26,36,29,34,"handler"],[26,43,29,41],[26,44,29,42,"handlerTag"],[26,54,29,52],[27,8,30,6,"newGestures"],[27,19,30,17],[27,20,30,18,"i"],[27,21,30,19],[27,22,30,20],[27,23,30,21,"handlers"],[27,31,30,29],[27,32,30,30,"handlerTag"],[27,42,30,40],[27,45,30,43,"handler"],[27,52,30,50],[27,53,30,51,"handlerTag"],[27,63,30,61],[28,6,31,4],[29,4,32,2],[29,5,32,3],[29,6,32,4],[30,4,33,2],[31,4,34,2],[33,4,37,2],[33,5,37,3],[33,6,37,4],[33,8,37,6,"_ghQueueMicrotask"],[33,25,37,23],[33,26,37,24,"ghQueueMicrotask"],[33,42,37,40],[33,44,37,42],[33,56,37,48],[34,6,38,4],[34,10,38,8],[34,11,38,9,"preparedGesture"],[34,26,38,24],[34,27,38,25,"isMounted"],[34,36,38,34],[34,38,38,36],[35,8,39,6],[36,6,40,4],[36,7,40,5],[36,8,40,6],[38,6,43,4],[38,10,43,8,"shouldUpdateSharedValueIfUsed"],[38,39,43,37],[38,42,43,40,"preparedGesture"],[38,57,43,55],[38,58,43,56,"attachedGestures"],[38,74,43,72],[38,75,43,73,"length"],[38,81,43,79],[38,86,43,84,"newGestures"],[38,97,43,95],[38,98,43,96,"length"],[38,104,43,102],[39,6,45,4],[39,11,45,9],[39,15,45,13,"i"],[39,17,45,14],[39,20,45,17],[39,21,45,18],[39,23,45,20,"i"],[39,25,45,21],[39,28,45,24,"newGestures"],[39,39,45,35],[39,40,45,36,"length"],[39,46,45,42],[39,48,45,44,"i"],[39,50,45,45],[39,52,45,47],[39,54,45,49],[40,8,46,6],[40,12,46,12,"handler"],[40,20,46,19],[40,23,46,22,"preparedGesture"],[40,38,46,37],[40,39,46,38,"attachedGestures"],[40,55,46,54],[40,56,46,55,"i"],[40,58,46,56],[40,59,46,57],[40,60,46,58],[40,61,46,59],[41,8,47,6],[43,8,49,6],[43,12,49,10,"handler"],[43,20,49,17],[43,21,49,18,"handlers"],[43,29,49,26],[43,30,49,27,"gestureId"],[43,39,49,36],[43,44,49,41,"newGestures"],[43,55,49,52],[43,56,49,53,"i"],[43,58,49,54],[43,59,49,55],[43,60,49,56,"handlers"],[43,68,49,64],[43,69,49,65,"gestureId"],[43,78,49,74],[43,83,49,79,"newGestures"],[43,94,49,90],[43,95,49,91,"i"],[43,97,49,92],[43,98,49,93],[43,99,49,94,"shouldUseReanimated"],[43,118,49,113],[43,122,49,117,"handler"],[43,130,49,124],[43,131,49,125,"shouldUseReanimated"],[43,150,49,144],[43,151,49,145],[43,153,49,147],[44,10,50,8,"shouldUpdateSharedValueIfUsed"],[44,39,50,37],[44,42,50,40],[44,46,50,44],[45,8,51,6],[46,8,53,6,"handler"],[46,16,53,13],[46,17,53,14,"config"],[46,23,53,20],[46,26,53,23,"newGestures"],[46,37,53,34],[46,38,53,35,"i"],[46,40,53,36],[46,41,53,37],[46,42,53,38,"config"],[46,48,53,44],[47,8,54,6,"handler"],[47,16,54,13],[47,17,54,14,"handlers"],[47,25,54,22],[47,28,54,25,"newGestures"],[47,39,54,36],[47,40,54,37,"i"],[47,42,54,38],[47,43,54,39],[47,44,54,40,"handlers"],[47,52,54,48],[48,8,56,6,"_RNGestureHandlerModule"],[48,31,56,29],[48,32,56,30,"default"],[48,39,56,37],[48,40,56,38,"updateGestureHandler"],[48,60,56,58],[48,61,56,59,"handler"],[48,69,56,66],[48,70,56,67,"handlerTag"],[48,80,56,77],[48,82,56,79],[48,83,56,80],[48,84,56,81],[48,86,56,83,"_utils"],[48,92,56,89],[48,93,56,90,"filterConfig"],[48,105,56,102],[48,107,56,104,"handler"],[48,115,56,111],[48,116,56,112,"config"],[48,122,56,118],[48,124,56,120,"_utils2"],[48,131,56,127],[48,132,56,128,"ALLOWED_PROPS"],[48,145,56,141],[48,147,56,143],[48,148,56,144],[48,149,56,145],[48,151,56,147,"_utils2"],[48,158,56,154],[48,159,56,155,"extractGestureRelations"],[48,182,56,178],[48,184,56,180,"handler"],[48,192,56,187],[48,193,56,188],[48,194,56,189],[48,195,56,190],[49,8,58,6],[49,9,58,7],[49,10,58,8],[49,12,58,10,"_handlersRegistry"],[49,29,58,27],[49,30,58,28,"registerHandler"],[49,45,58,43],[49,47,58,45,"handler"],[49,55,58,52],[49,56,58,53,"handlerTag"],[49,66,58,63],[49,68,58,65,"handler"],[49,76,58,72],[49,78,58,74,"handler"],[49,86,58,81],[49,87,58,82,"config"],[49,93,58,88],[49,94,58,89,"testId"],[49,100,58,95],[49,101,58,96],[50,6,59,4],[51,6,61,4],[51,10,61,8,"preparedGesture"],[51,25,61,23],[51,26,61,24,"animatedHandlers"],[51,42,61,40],[51,46,61,44,"shouldUpdateSharedValueIfUsed"],[51,75,61,73],[51,77,61,75],[52,8,62,6],[52,12,62,12,"newHandlersValue"],[52,28,62,28],[52,31,62,31,"preparedGesture"],[52,46,62,46],[52,47,62,47,"attachedGestures"],[52,63,62,63],[52,64,62,64,"filter"],[52,70,62,70],[52,71,62,71],[52,81,62,71,"g"],[52,82,62,72],[53,10,62,72],[53,17,62,76,"g"],[53,18,62,77],[53,19,62,78,"shouldUseReanimated"],[53,38,62,97],[54,8,62,97],[54,10,62,98],[54,11,62,99],[55,8,62,99],[55,9,63,7,"map"],[55,12,63,10],[55,13,63,11],[55,23,63,11,"g"],[55,24,63,12],[56,10,63,12],[56,17,63,16,"g"],[56,18,63,17],[56,19,63,18,"handlers"],[56,27,63,26],[57,8,63,26],[57,10,63,27],[58,8,64,6,"preparedGesture"],[58,23,64,21],[58,24,64,22,"animatedHandlers"],[58,40,64,38],[58,41,64,39,"value"],[58,46,64,44],[58,49,64,47,"newHandlersValue"],[58,65,64,63],[59,6,65,4],[60,6,67,4],[60,7,67,5],[60,8,67,6],[60,10,67,8,"_utils"],[60,16,67,14],[60,17,67,15,"scheduleFlushOperations"],[60,40,67,38],[60,42,67,40],[60,43,67,41],[61,4,68,2],[61,5,68,3],[61,6,68,4],[62,2,69,0],[63,0,69,1]],"functionMap":{"names":["<global>","_interopRequireDefault","updateHandlers","<anonymous>","preparedGesture.attachedGestures.filter$argument_0","preparedGesture.attachedGestures.filter.map$argument_0"],"mappings":"AAA;ACiB,+FD;AEE;0CCiB;uECyB,0BD;WEC,eF;GDK;CFC"}},"type":"js/module"}]}