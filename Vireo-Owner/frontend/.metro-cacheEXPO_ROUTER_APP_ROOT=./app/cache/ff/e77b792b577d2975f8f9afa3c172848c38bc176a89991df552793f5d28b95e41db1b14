{"dependencies":[{"name":"./util","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"DQ+NnsvRW532iS20nr5BN5Yr8jw="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.withSequence = withSequence;\n  var _util = _$$_REQUIRE(_dependencyMap[0], \"./util\");\n  function withSequence() {\n    'worklet';\n\n    for (var _len = arguments.length, _animations = new Array(_len), _key = 0; _key < _len; _key++) {\n      _animations[_key] = arguments[_key];\n    }\n    return (0, _util.defineAnimation)(_animations[0], function () {\n      'worklet';\n\n      var animations = _animations.map(function (a) {\n        var result = typeof a === 'function' ? a() : a;\n        result.finished = false;\n        return result;\n      });\n      var firstAnimation = animations[0];\n      var callback = function callback(finished) {\n        if (finished) {\n          // we want to call the callback after every single animation\n          // not after all of them\n          return;\n        }\n        // this is going to be called only if sequence has been cancelled\n        animations.forEach(function (animation) {\n          if (typeof animation.callback === 'function' && !animation.finished) {\n            animation.callback(finished);\n          }\n        });\n      };\n      function sequence(animation, now) {\n        var currentAnim = animations[animation.animationIndex];\n        var finished = currentAnim.onFrame(currentAnim, now);\n        animation.current = currentAnim.current;\n        if (finished) {\n          // we want to call the callback after every single animation\n          if (currentAnim.callback) {\n            currentAnim.callback(true /* finished */);\n          }\n          currentAnim.finished = true;\n          animation.animationIndex += 1;\n          if (animation.animationIndex < animations.length) {\n            var nextAnim = animations[animation.animationIndex];\n            nextAnim.onStart(nextAnim, currentAnim.current, now, currentAnim);\n            return false;\n          }\n          return true;\n        }\n        return false;\n      }\n      function onStart(animation, value, now, previousAnimation) {\n        animation.animationIndex = 0;\n        if (previousAnimation === undefined) {\n          previousAnimation = animations[animations.length - 1];\n        }\n        firstAnimation.onStart(firstAnimation, value, now, previousAnimation);\n      }\n      return {\n        isHigherOrder: true,\n        onFrame: sequence,\n        onStart: onStart,\n        animationIndex: 0,\n        current: firstAnimation.current,\n        callback: callback\n      };\n    });\n  }\n});","lineCount":72,"map":[[6,2,1,0],[6,6,1,0,"_util"],[6,11,1,0],[6,14,1,0,"_$$_REQUIRE"],[6,25,1,0],[6,26,1,0,"_dependencyMap"],[6,40,1,0],[7,2,2,7],[7,11,2,16,"withSequence"],[7,23,2,28,"withSequence"],[7,24,2,28],[7,26,2,31],[8,4,3,2],[8,13,3,11],[10,4,5,2],[10,9,5,7],[10,13,5,11,"_len"],[10,17,5,15],[10,20,5,18,"arguments"],[10,29,5,27],[10,30,5,28,"length"],[10,36,5,34],[10,38,5,36,"_animations"],[10,49,5,47],[10,52,5,50],[10,56,5,54,"Array"],[10,61,5,59],[10,62,5,60,"_len"],[10,66,5,64],[10,67,5,65],[10,69,5,67,"_key"],[10,73,5,71],[10,76,5,74],[10,77,5,75],[10,79,5,77,"_key"],[10,83,5,81],[10,86,5,84,"_len"],[10,90,5,88],[10,92,5,90,"_key"],[10,96,5,94],[10,98,5,96],[10,100,5,98],[11,6,6,4,"_animations"],[11,17,6,15],[11,18,6,16,"_key"],[11,22,6,20],[11,23,6,21],[11,26,6,24,"arguments"],[11,35,6,33],[11,36,6,34,"_key"],[11,40,6,38],[11,41,6,39],[12,4,7,2],[13,4,8,2],[13,11,8,9],[13,15,8,9,"defineAnimation"],[13,36,8,24],[13,38,8,25,"_animations"],[13,49,8,36],[13,50,8,37],[13,51,8,38],[13,52,8,39],[13,54,8,41],[13,66,8,47],[14,6,9,4],[14,15,9,13],[16,6,11,4],[16,10,11,10,"animations"],[16,20,11,20],[16,23,11,23,"_animations"],[16,34,11,34],[16,35,11,35,"map"],[16,38,11,38],[16,39,11,39],[16,49,11,39,"a"],[16,50,11,40],[16,52,11,44],[17,8,12,6],[17,12,12,12,"result"],[17,18,12,18],[17,21,12,21],[17,28,12,28,"a"],[17,29,12,29],[17,34,12,34],[17,44,12,44],[17,47,12,47,"a"],[17,48,12,48],[17,49,12,49],[17,50,12,50],[17,53,12,53,"a"],[17,54,12,54],[18,8,13,6,"result"],[18,14,13,12],[18,15,13,13,"finished"],[18,23,13,21],[18,26,13,24],[18,31,13,29],[19,8,14,6],[19,15,14,13,"result"],[19,21,14,19],[20,6,15,4],[20,7,15,5],[20,8,15,6],[21,6,16,4],[21,10,16,10,"firstAnimation"],[21,24,16,24],[21,27,16,27,"animations"],[21,37,16,37],[21,38,16,38],[21,39,16,39],[21,40,16,40],[22,6,17,4],[22,10,17,10,"callback"],[22,18,17,18],[22,21,17,21],[22,30,17,10,"callback"],[22,38,17,18,"callback"],[22,39,17,21,"finished"],[22,47,17,29],[22,49,17,33],[23,8,18,6],[23,12,18,10,"finished"],[23,20,18,18],[23,22,18,20],[24,10,19,8],[25,10,20,8],[26,10,21,8],[27,8,22,6],[28,8,23,6],[29,8,24,6,"animations"],[29,18,24,16],[29,19,24,17,"forEach"],[29,26,24,24],[29,27,24,25],[29,37,24,25,"animation"],[29,46,24,34],[29,48,24,38],[30,10,25,8],[30,14,25,12],[30,21,25,19,"animation"],[30,30,25,28],[30,31,25,29,"callback"],[30,39,25,37],[30,44,25,42],[30,54,25,52],[30,58,25,56],[30,59,25,57,"animation"],[30,68,25,66],[30,69,25,67,"finished"],[30,77,25,75],[30,79,25,77],[31,12,26,10,"animation"],[31,21,26,19],[31,22,26,20,"callback"],[31,30,26,28],[31,31,26,29,"finished"],[31,39,26,37],[31,40,26,38],[32,10,27,8],[33,8,28,6],[33,9,28,7],[33,10,28,8],[34,6,29,4],[34,7,29,5],[35,6,30,4],[35,15,30,13,"sequence"],[35,23,30,21,"sequence"],[35,24,30,22,"animation"],[35,33,30,31],[35,35,30,33,"now"],[35,38,30,36],[35,40,30,38],[36,8,31,6],[36,12,31,12,"currentAnim"],[36,23,31,23],[36,26,31,26,"animations"],[36,36,31,36],[36,37,31,37,"animation"],[36,46,31,46],[36,47,31,47,"animationIndex"],[36,61,31,61],[36,62,31,62],[37,8,32,6],[37,12,32,12,"finished"],[37,20,32,20],[37,23,32,23,"currentAnim"],[37,34,32,34],[37,35,32,35,"onFrame"],[37,42,32,42],[37,43,32,43,"currentAnim"],[37,54,32,54],[37,56,32,56,"now"],[37,59,32,59],[37,60,32,60],[38,8,33,6,"animation"],[38,17,33,15],[38,18,33,16,"current"],[38,25,33,23],[38,28,33,26,"currentAnim"],[38,39,33,37],[38,40,33,38,"current"],[38,47,33,45],[39,8,34,6],[39,12,34,10,"finished"],[39,20,34,18],[39,22,34,20],[40,10,35,8],[41,10,36,8],[41,14,36,12,"currentAnim"],[41,25,36,23],[41,26,36,24,"callback"],[41,34,36,32],[41,36,36,34],[42,12,37,10,"currentAnim"],[42,23,37,21],[42,24,37,22,"callback"],[42,32,37,30],[42,33,37,31],[42,37,37,35],[42,38,37,36],[42,52,37,50],[42,53,37,51],[43,10,38,8],[44,10,40,8,"currentAnim"],[44,21,40,19],[44,22,40,20,"finished"],[44,30,40,28],[44,33,40,31],[44,37,40,35],[45,10,41,8,"animation"],[45,19,41,17],[45,20,41,18,"animationIndex"],[45,34,41,32],[45,38,41,36],[45,39,41,37],[46,10,42,8],[46,14,42,12,"animation"],[46,23,42,21],[46,24,42,22,"animationIndex"],[46,38,42,36],[46,41,42,39,"animations"],[46,51,42,49],[46,52,42,50,"length"],[46,58,42,56],[46,60,42,58],[47,12,43,10],[47,16,43,16,"nextAnim"],[47,24,43,24],[47,27,43,27,"animations"],[47,37,43,37],[47,38,43,38,"animation"],[47,47,43,47],[47,48,43,48,"animationIndex"],[47,62,43,62],[47,63,43,63],[48,12,44,10,"nextAnim"],[48,20,44,18],[48,21,44,19,"onStart"],[48,28,44,26],[48,29,44,27,"nextAnim"],[48,37,44,35],[48,39,44,37,"currentAnim"],[48,50,44,48],[48,51,44,49,"current"],[48,58,44,56],[48,60,44,58,"now"],[48,63,44,61],[48,65,44,63,"currentAnim"],[48,76,44,74],[48,77,44,75],[49,12,45,10],[49,19,45,17],[49,24,45,22],[50,10,46,8],[51,10,47,8],[51,17,47,15],[51,21,47,19],[52,8,48,6],[53,8,49,6],[53,15,49,13],[53,20,49,18],[54,6,50,4],[55,6,51,4],[55,15,51,13,"onStart"],[55,22,51,20,"onStart"],[55,23,51,21,"animation"],[55,32,51,30],[55,34,51,32,"value"],[55,39,51,37],[55,41,51,39,"now"],[55,44,51,42],[55,46,51,44,"previousAnimation"],[55,63,51,61],[55,65,51,63],[56,8,52,6,"animation"],[56,17,52,15],[56,18,52,16,"animationIndex"],[56,32,52,30],[56,35,52,33],[56,36,52,34],[57,8,53,6],[57,12,53,10,"previousAnimation"],[57,29,53,27],[57,34,53,32,"undefined"],[57,43,53,41],[57,45,53,43],[58,10,54,8,"previousAnimation"],[58,27,54,25],[58,30,54,28,"animations"],[58,40,54,38],[58,41,54,39,"animations"],[58,51,54,49],[58,52,54,50,"length"],[58,58,54,56],[58,61,54,59],[58,62,54,60],[58,63,54,61],[59,8,55,6],[60,8,56,6,"firstAnimation"],[60,22,56,20],[60,23,56,21,"onStart"],[60,30,56,28],[60,31,56,29,"firstAnimation"],[60,45,56,43],[60,47,56,45,"value"],[60,52,56,50],[60,54,56,52,"now"],[60,57,56,55],[60,59,56,57,"previousAnimation"],[60,76,56,74],[60,77,56,75],[61,6,57,4],[62,6,58,4],[62,13,58,11],[63,8,59,6,"isHigherOrder"],[63,21,59,19],[63,23,59,21],[63,27,59,25],[64,8,60,6,"onFrame"],[64,15,60,13],[64,17,60,15,"sequence"],[64,25,60,23],[65,8,61,6,"onStart"],[65,15,61,13],[65,17,61,6,"onStart"],[65,24,61,13],[66,8,62,6,"animationIndex"],[66,22,62,20],[66,24,62,22],[66,25,62,23],[67,8,63,6,"current"],[67,15,63,13],[67,17,63,15,"firstAnimation"],[67,31,63,29],[67,32,63,30,"current"],[67,39,63,37],[68,8,64,6,"callback"],[68,16,64,14],[68,18,64,6,"callback"],[69,6,65,4],[69,7,65,5],[70,4,66,2],[70,5,66,3],[70,6,66,4],[71,2,67,0],[72,0,67,1]],"functionMap":{"names":["<global>","withSequence","defineAnimation$argument_1","_animations.map$argument_0","callback","animations.forEach$argument_0","sequence","onStart"],"mappings":"AAA;OCC;yCCM;uCCG;KDI;qBEE;yBCO;ODI;KFC;IIC;KJoB;IKC;KLM;GDS;CDC"}},"type":"js/module"}]}