{"dependencies":[{"name":"./mappers","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"LaW0R8w80BPXk939uNZHB641YRg="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  Object.defineProperty(exports, \"stopMapper\", {\n    enumerable: true,\n    get: function get() {\n      return _mappers.stopMapper;\n    }\n  });\n  exports.valueSetter = valueSetter;\n  var _mappers = _$$_REQUIRE(_dependencyMap[0], \"./mappers\");\n  function valueSetter(sv, value) {\n    'worklet';\n\n    var previousAnimation = sv._animation;\n    if (previousAnimation) {\n      previousAnimation.cancelled = true;\n      sv._animation = null;\n    }\n    if (typeof value === 'function' || value !== null && typeof value === 'object' && value.onFrame !== undefined) {\n      var animation = typeof value === 'function' ? value() : value;\n      // prevent setting again to the same value\n      // and triggering the mappers that treat this value as an input\n      // this happens when the animation's target value(stored in animation.current until animation.onStart is called) is set to the same value as a current one(this._value)\n      // built in animations that are not higher order(withTiming, withSpring) hold target value in .current\n      if (sv._value === animation.current && !animation.isHigherOrder) {\n        animation.callback && animation.callback(true);\n        return;\n      }\n      // animated set\n      var initializeAnimation = function initializeAnimation(timestamp) {\n        animation.onStart(animation, sv.value, timestamp, previousAnimation);\n      };\n      var currentTimestamp = global.__frameTimestamp || performance.now();\n      initializeAnimation(currentTimestamp);\n      var _step = function step(timestamp) {\n        if (animation.cancelled) {\n          animation.callback && animation.callback(false /* finished */);\n          return;\n        }\n        var finished = animation.onFrame(animation, timestamp);\n        animation.finished = true;\n        animation.timestamp = timestamp;\n        sv._value = animation.current;\n        if (finished) {\n          animation.callback && animation.callback(true /* finished */);\n        } else {\n          requestAnimationFrame(_step);\n        }\n      };\n      sv._animation = animation;\n      _step(currentTimestamp);\n    } else {\n      // prevent setting again to the same value\n      // and triggering the mappers that treat this value as an input\n      if (sv._value === value) {\n        return;\n      }\n      sv._value = value;\n    }\n  }\n});","lineCount":63,"map":[[12,2,1,0],[12,6,1,0,"_mappers"],[12,14,1,0],[12,17,1,0,"_$$_REQUIRE"],[12,28,1,0],[12,29,1,0,"_dependencyMap"],[12,43,1,0],[13,2,2,7],[13,11,2,16,"valueSetter"],[13,22,2,27,"valueSetter"],[13,23,2,28,"sv"],[13,25,2,30],[13,27,2,32,"value"],[13,32,2,37],[13,34,2,39],[14,4,3,2],[14,13,3,11],[16,4,5,2],[16,8,5,8,"previousAnimation"],[16,25,5,25],[16,28,5,28,"sv"],[16,30,5,30],[16,31,5,31,"_animation"],[16,41,5,41],[17,4,6,2],[17,8,6,6,"previousAnimation"],[17,25,6,23],[17,27,6,25],[18,6,7,4,"previousAnimation"],[18,23,7,21],[18,24,7,22,"cancelled"],[18,33,7,31],[18,36,7,34],[18,40,7,38],[19,6,8,4,"sv"],[19,8,8,6],[19,9,8,7,"_animation"],[19,19,8,17],[19,22,8,20],[19,26,8,24],[20,4,9,2],[21,4,10,2],[21,8,10,6],[21,15,10,13,"value"],[21,20,10,18],[21,25,10,23],[21,35,10,33],[21,39,10,37,"value"],[21,44,10,42],[21,49,10,47],[21,53,10,51],[21,57,10,55],[21,64,10,62,"value"],[21,69,10,67],[21,74,10,72],[21,82,10,80],[21,86,10,84,"value"],[21,91,10,89],[21,92,10,90,"onFrame"],[21,99,10,97],[21,104,10,102,"undefined"],[21,113,10,111],[21,115,10,113],[22,6,11,4],[22,10,11,10,"animation"],[22,19,11,19],[22,22,11,22],[22,29,11,29,"value"],[22,34,11,34],[22,39,11,39],[22,49,11,49],[22,52,11,52,"value"],[22,57,11,57],[22,58,11,58],[22,59,11,59],[22,62,11,62,"value"],[22,67,11,67],[23,6,12,4],[24,6,13,4],[25,6,14,4],[26,6,15,4],[27,6,16,4],[27,10,16,8,"sv"],[27,12,16,10],[27,13,16,11,"_value"],[27,19,16,17],[27,24,16,22,"animation"],[27,33,16,31],[27,34,16,32,"current"],[27,41,16,39],[27,45,16,43],[27,46,16,44,"animation"],[27,55,16,53],[27,56,16,54,"isHigherOrder"],[27,69,16,67],[27,71,16,69],[28,8,17,6,"animation"],[28,17,17,15],[28,18,17,16,"callback"],[28,26,17,24],[28,30,17,28,"animation"],[28,39,17,37],[28,40,17,38,"callback"],[28,48,17,46],[28,49,17,47],[28,53,17,51],[28,54,17,52],[29,8,18,6],[30,6,19,4],[31,6,20,4],[32,6,21,4],[32,10,21,10,"initializeAnimation"],[32,29,21,29],[32,32,21,32],[32,41,21,10,"initializeAnimation"],[32,60,21,29,"initializeAnimation"],[32,61,21,32,"timestamp"],[32,70,21,41],[32,72,21,45],[33,8,22,6,"animation"],[33,17,22,15],[33,18,22,16,"onStart"],[33,25,22,23],[33,26,22,24,"animation"],[33,35,22,33],[33,37,22,35,"sv"],[33,39,22,37],[33,40,22,38,"value"],[33,45,22,43],[33,47,22,45,"timestamp"],[33,56,22,54],[33,58,22,56,"previousAnimation"],[33,75,22,73],[33,76,22,74],[34,6,23,4],[34,7,23,5],[35,6,24,4],[35,10,24,10,"currentTimestamp"],[35,26,24,26],[35,29,24,29,"global"],[35,35,24,35],[35,36,24,36,"__frameTimestamp"],[35,52,24,52],[35,56,24,56,"performance"],[35,67,24,67],[35,68,24,68,"now"],[35,71,24,71],[35,72,24,72],[35,73,24,73],[36,6,25,4,"initializeAnimation"],[36,25,25,23],[36,26,25,24,"currentTimestamp"],[36,42,25,40],[36,43,25,41],[37,6,26,4],[37,10,26,10,"step"],[37,15,26,14],[37,18,26,17],[37,27,26,10,"step"],[37,31,26,14,"step"],[37,32,26,17,"timestamp"],[37,41,26,26],[37,43,26,30],[38,8,27,6],[38,12,27,10,"animation"],[38,21,27,19],[38,22,27,20,"cancelled"],[38,31,27,29],[38,33,27,31],[39,10,28,8,"animation"],[39,19,28,17],[39,20,28,18,"callback"],[39,28,28,26],[39,32,28,30,"animation"],[39,41,28,39],[39,42,28,40,"callback"],[39,50,28,48],[39,51,28,49],[39,56,28,54],[39,57,28,55],[39,71,28,69],[39,72,28,70],[40,10,29,8],[41,8,30,6],[42,8,31,6],[42,12,31,12,"finished"],[42,20,31,20],[42,23,31,23,"animation"],[42,32,31,32],[42,33,31,33,"onFrame"],[42,40,31,40],[42,41,31,41,"animation"],[42,50,31,50],[42,52,31,52,"timestamp"],[42,61,31,61],[42,62,31,62],[43,8,32,6,"animation"],[43,17,32,15],[43,18,32,16,"finished"],[43,26,32,24],[43,29,32,27],[43,33,32,31],[44,8,33,6,"animation"],[44,17,33,15],[44,18,33,16,"timestamp"],[44,27,33,25],[44,30,33,28,"timestamp"],[44,39,33,37],[45,8,34,6,"sv"],[45,10,34,8],[45,11,34,9,"_value"],[45,17,34,15],[45,20,34,18,"animation"],[45,29,34,27],[45,30,34,28,"current"],[45,37,34,35],[46,8,35,6],[46,12,35,10,"finished"],[46,20,35,18],[46,22,35,20],[47,10,36,8,"animation"],[47,19,36,17],[47,20,36,18,"callback"],[47,28,36,26],[47,32,36,30,"animation"],[47,41,36,39],[47,42,36,40,"callback"],[47,50,36,48],[47,51,36,49],[47,55,36,53],[47,56,36,54],[47,70,36,68],[47,71,36,69],[48,8,37,6],[48,9,37,7],[48,15,37,13],[49,10,38,8,"requestAnimationFrame"],[49,31,38,29],[49,32,38,30,"step"],[49,37,38,34],[49,38,38,35],[50,8,39,6],[51,6,40,4],[51,7,40,5],[52,6,41,4,"sv"],[52,8,41,6],[52,9,41,7,"_animation"],[52,19,41,17],[52,22,41,20,"animation"],[52,31,41,29],[53,6,42,4,"step"],[53,11,42,8],[53,12,42,9,"currentTimestamp"],[53,28,42,25],[53,29,42,26],[54,4,43,2],[54,5,43,3],[54,11,43,9],[55,6,44,4],[56,6,45,4],[57,6,46,4],[57,10,46,8,"sv"],[57,12,46,10],[57,13,46,11,"_value"],[57,19,46,17],[57,24,46,22,"value"],[57,29,46,27],[57,31,46,29],[58,8,47,6],[59,6,48,4],[60,6,49,4,"sv"],[60,8,49,6],[60,9,49,7,"_value"],[60,15,49,13],[60,18,49,16,"value"],[60,23,49,21],[61,4,50,2],[62,2,51,0],[63,0,51,1]],"functionMap":{"names":["<global>","valueSetter","initializeAnimation","step"],"mappings":"AAA;OCC;gCCmB;KDE;iBEG;KFc;CDW"}},"type":"js/module"}]}