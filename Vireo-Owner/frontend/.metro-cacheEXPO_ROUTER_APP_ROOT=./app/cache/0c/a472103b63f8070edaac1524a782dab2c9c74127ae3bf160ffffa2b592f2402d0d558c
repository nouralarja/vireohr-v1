{"dependencies":[],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.valueSetter = valueSetter;\n  function valueSetter(mutable, value) {\n    'worklet';\n\n    var forceUpdate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var previousAnimation = mutable._animation;\n    if (previousAnimation) {\n      previousAnimation.cancelled = true;\n      mutable._animation = null;\n    }\n    if (typeof value === 'function' || value !== null && typeof value === 'object' &&\n    // TODO TYPESCRIPT fix this after fixing AnimationObject type\n    value.onFrame !== undefined) {\n      var animation = typeof value === 'function' ?\n      // TODO TYPESCRIPT fix this after fixing AnimationObject type\n      value() :\n      // TODO TYPESCRIPT fix this after fixing AnimationObject type\n      value;\n      // prevent setting again to the same value\n      // and triggering the mappers that treat this value as an input\n      // this happens when the animation's target value(stored in animation.current until animation.onStart is called) is set to the same value as a current one(this._value)\n      // built in animations that are not higher order(withTiming, withSpring) hold target value in .current\n      if (mutable._value === animation.current && !animation.isHigherOrder && !forceUpdate) {\n        animation.callback && animation.callback(true);\n        return;\n      }\n      // animated set\n      var initializeAnimation = function initializeAnimation(timestamp) {\n        animation.onStart(animation, mutable.value, timestamp, previousAnimation);\n      };\n      var currentTimestamp = global.__frameTimestamp || global._getAnimationTimestamp();\n      initializeAnimation(currentTimestamp);\n      var _step = function step(newTimestamp) {\n        // Function `requestAnimationFrame` adds callback to an array, all the callbacks are flushed with function `__flushAnimationFrame`\n        // Usually we flush them inside function `nativeRequestAnimationFrame` and then the given timestamp is the timestamp of end of the current frame.\n        // However function `__flushAnimationFrame` may also be called inside `registerEventHandler` - then we get actual timestamp which is earlier than the end of the frame.\n\n        var timestamp = newTimestamp < (animation.timestamp || 0) ? animation.timestamp : newTimestamp;\n        if (animation.cancelled) {\n          animation.callback && animation.callback(false /* finished */);\n          return;\n        }\n        var finished = animation.onFrame(animation, timestamp);\n        animation.finished = true;\n        animation.timestamp = timestamp;\n        // TODO TYPESCRIPT\n        // For now I'll assume that `animation.current` is always defined\n        // but actually need to dive into animations to understand it\n        mutable._value = animation.current;\n        if (finished) {\n          animation.callback && animation.callback(true /* finished */);\n        } else {\n          requestAnimationFrame(_step);\n        }\n      };\n      mutable._animation = animation;\n      _step(currentTimestamp);\n    } else {\n      // prevent setting again to the same value\n      // and triggering the mappers that treat this value as an input\n      if (mutable._value === value && !forceUpdate) {\n        return;\n      }\n      mutable._value = value;\n    }\n  }\n});","lineCount":73,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"valueSetter"],[7,21,1,13],[7,24,1,13,"valueSetter"],[7,35,1,13],[8,2,3,7],[8,11,3,16,"valueSetter"],[8,22,3,27,"valueSetter"],[8,23,3,28,"mutable"],[8,30,3,35],[8,32,3,37,"value"],[8,37,3,42],[8,39,3,65],[9,4,4,2],[9,13,4,11],[11,4,4,12],[11,8,3,44,"forceUpdate"],[11,19,3,55],[11,22,3,55,"arguments"],[11,31,3,55],[11,32,3,55,"length"],[11,38,3,55],[11,46,3,55,"arguments"],[11,55,3,55],[11,63,3,55,"undefined"],[11,72,3,55],[11,75,3,55,"arguments"],[11,84,3,55],[11,90,3,58],[11,95,3,63],[12,4,6,2],[12,8,6,8,"previousAnimation"],[12,25,6,25],[12,28,6,28,"mutable"],[12,35,6,35],[12,36,6,36,"_animation"],[12,46,6,46],[13,4,7,2],[13,8,7,6,"previousAnimation"],[13,25,7,23],[13,27,7,25],[14,6,8,4,"previousAnimation"],[14,23,8,21],[14,24,8,22,"cancelled"],[14,33,8,31],[14,36,8,34],[14,40,8,38],[15,6,9,4,"mutable"],[15,13,9,11],[15,14,9,12,"_animation"],[15,24,9,22],[15,27,9,25],[15,31,9,29],[16,4,10,2],[17,4,11,2],[17,8,11,6],[17,15,11,13,"value"],[17,20,11,18],[17,25,11,23],[17,35,11,33],[17,39,11,37,"value"],[17,44,11,42],[17,49,11,47],[17,53,11,51],[17,57,11,55],[17,64,11,62,"value"],[17,69,11,67],[17,74,11,72],[17,82,11,80],[18,4,12,2],[19,4,13,2,"value"],[19,9,13,7],[19,10,13,8,"onFrame"],[19,17,13,15],[19,22,13,20,"undefined"],[19,31,13,29],[19,33,13,31],[20,6,14,4],[20,10,14,10,"animation"],[20,19,14,19],[20,22,14,22],[20,29,14,29,"value"],[20,34,14,34],[20,39,14,39],[20,49,14,49],[21,6,15,4],[22,6,16,4,"value"],[22,11,16,9],[22,12,16,10],[22,13,16,11],[23,6,17,4],[24,6,18,4,"value"],[24,11,18,9],[25,6,19,4],[26,6,20,4],[27,6,21,4],[28,6,22,4],[29,6,23,4],[29,10,23,8,"mutable"],[29,17,23,15],[29,18,23,16,"_value"],[29,24,23,22],[29,29,23,27,"animation"],[29,38,23,36],[29,39,23,37,"current"],[29,46,23,44],[29,50,23,48],[29,51,23,49,"animation"],[29,60,23,58],[29,61,23,59,"isHigherOrder"],[29,74,23,72],[29,78,23,76],[29,79,23,77,"forceUpdate"],[29,90,23,88],[29,92,23,90],[30,8,24,6,"animation"],[30,17,24,15],[30,18,24,16,"callback"],[30,26,24,24],[30,30,24,28,"animation"],[30,39,24,37],[30,40,24,38,"callback"],[30,48,24,46],[30,49,24,47],[30,53,24,51],[30,54,24,52],[31,8,25,6],[32,6,26,4],[33,6,27,4],[34,6,28,4],[34,10,28,10,"initializeAnimation"],[34,29,28,29],[34,32,28,32],[34,41,28,10,"initializeAnimation"],[34,60,28,29,"initializeAnimation"],[34,61,28,32,"timestamp"],[34,70,28,41],[34,72,28,45],[35,8,29,6,"animation"],[35,17,29,15],[35,18,29,16,"onStart"],[35,25,29,23],[35,26,29,24,"animation"],[35,35,29,33],[35,37,29,35,"mutable"],[35,44,29,42],[35,45,29,43,"value"],[35,50,29,48],[35,52,29,50,"timestamp"],[35,61,29,59],[35,63,29,61,"previousAnimation"],[35,80,29,78],[35,81,29,79],[36,6,30,4],[36,7,30,5],[37,6,31,4],[37,10,31,10,"currentTimestamp"],[37,26,31,26],[37,29,31,29,"global"],[37,35,31,35],[37,36,31,36,"__frameTimestamp"],[37,52,31,52],[37,56,31,56,"global"],[37,62,31,62],[37,63,31,63,"_getAnimationTimestamp"],[37,85,31,85],[37,86,31,86],[37,87,31,87],[38,6,32,4,"initializeAnimation"],[38,25,32,23],[38,26,32,24,"currentTimestamp"],[38,42,32,40],[38,43,32,41],[39,6,33,4],[39,10,33,10,"step"],[39,15,33,14],[39,18,33,17],[39,27,33,10,"step"],[39,31,33,14,"step"],[39,32,33,17,"newTimestamp"],[39,44,33,29],[39,46,33,33],[40,8,34,6],[41,8,35,6],[42,8,36,6],[44,8,38,6],[44,12,38,12,"timestamp"],[44,21,38,21],[44,24,38,24,"newTimestamp"],[44,36,38,36],[44,40,38,40,"animation"],[44,49,38,49],[44,50,38,50,"timestamp"],[44,59,38,59],[44,63,38,63],[44,64,38,64],[44,65,38,65],[44,68,38,68,"animation"],[44,77,38,77],[44,78,38,78,"timestamp"],[44,87,38,87],[44,90,38,90,"newTimestamp"],[44,102,38,102],[45,8,39,6],[45,12,39,10,"animation"],[45,21,39,19],[45,22,39,20,"cancelled"],[45,31,39,29],[45,33,39,31],[46,10,40,8,"animation"],[46,19,40,17],[46,20,40,18,"callback"],[46,28,40,26],[46,32,40,30,"animation"],[46,41,40,39],[46,42,40,40,"callback"],[46,50,40,48],[46,51,40,49],[46,56,40,54],[46,57,40,55],[46,71,40,69],[46,72,40,70],[47,10,41,8],[48,8,42,6],[49,8,43,6],[49,12,43,12,"finished"],[49,20,43,20],[49,23,43,23,"animation"],[49,32,43,32],[49,33,43,33,"onFrame"],[49,40,43,40],[49,41,43,41,"animation"],[49,50,43,50],[49,52,43,52,"timestamp"],[49,61,43,61],[49,62,43,62],[50,8,44,6,"animation"],[50,17,44,15],[50,18,44,16,"finished"],[50,26,44,24],[50,29,44,27],[50,33,44,31],[51,8,45,6,"animation"],[51,17,45,15],[51,18,45,16,"timestamp"],[51,27,45,25],[51,30,45,28,"timestamp"],[51,39,45,37],[52,8,46,6],[53,8,47,6],[54,8,48,6],[55,8,49,6,"mutable"],[55,15,49,13],[55,16,49,14,"_value"],[55,22,49,20],[55,25,49,23,"animation"],[55,34,49,32],[55,35,49,33,"current"],[55,42,49,40],[56,8,50,6],[56,12,50,10,"finished"],[56,20,50,18],[56,22,50,20],[57,10,51,8,"animation"],[57,19,51,17],[57,20,51,18,"callback"],[57,28,51,26],[57,32,51,30,"animation"],[57,41,51,39],[57,42,51,40,"callback"],[57,50,51,48],[57,51,51,49],[57,55,51,53],[57,56,51,54],[57,70,51,68],[57,71,51,69],[58,8,52,6],[58,9,52,7],[58,15,52,13],[59,10,53,8,"requestAnimationFrame"],[59,31,53,29],[59,32,53,30,"step"],[59,37,53,34],[59,38,53,35],[60,8,54,6],[61,6,55,4],[61,7,55,5],[62,6,56,4,"mutable"],[62,13,56,11],[62,14,56,12,"_animation"],[62,24,56,22],[62,27,56,25,"animation"],[62,36,56,34],[63,6,57,4,"step"],[63,11,57,8],[63,12,57,9,"currentTimestamp"],[63,28,57,25],[63,29,57,26],[64,4,58,2],[64,5,58,3],[64,11,58,9],[65,6,59,4],[66,6,60,4],[67,6,61,4],[67,10,61,8,"mutable"],[67,17,61,15],[67,18,61,16,"_value"],[67,24,61,22],[67,29,61,27,"value"],[67,34,61,32],[67,38,61,36],[67,39,61,37,"forceUpdate"],[67,50,61,48],[67,52,61,50],[68,8,62,6],[69,6,63,4],[70,6,64,4,"mutable"],[70,13,64,11],[70,14,64,12,"_value"],[70,20,64,18],[70,23,64,21,"value"],[70,28,64,26],[71,4,65,2],[72,2,66,0],[73,0,66,1]],"functionMap":{"names":["<global>","valueSetter","initializeAnimation","step"],"mappings":"AAA;OCE;gCCyB;KDE;iBEG;KFsB;CDW"}},"type":"js/module"}]}