{"dependencies":[{"name":"./utils.js","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":56,"index":71}}],"key":"03VO7/E+L2S6CYQuFHTg8eKUrwk="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.rubberBandDecay = rubberBandDecay;\n  var _utils = _$$_REQUIRE(_dependencyMap[0], \"./utils.js\");\n  var DERIVATIVE_EPS = 0.1;\n  function rubberBandDecay(animation, now, config) {\n    'worklet';\n\n    var lastTimestamp = animation.lastTimestamp,\n      startTimestamp = animation.startTimestamp,\n      current = animation.current,\n      velocity = animation.velocity;\n    var deltaTime = Math.min(now - lastTimestamp, 64);\n    var clampIndex = Math.abs(current - config.clamp[0]) < Math.abs(current - config.clamp[1]) ? 0 : 1;\n    var derivative = 0;\n    if (current < config.clamp[0] || current > config.clamp[1]) {\n      derivative = current - config.clamp[clampIndex];\n    }\n    var v = velocity * Math.exp(-(1 - config.deceleration) * (now - startTimestamp) * _utils.SLOPE_FACTOR) - derivative * config.rubberBandFactor;\n    if (Math.abs(derivative) > DERIVATIVE_EPS) {\n      animation.springActive = true;\n    } else if (animation.springActive) {\n      animation.current = config.clamp[clampIndex];\n      return true;\n    } else if (Math.abs(v) < _utils.VELOCITY_EPS) {\n      return true;\n    }\n    animation.current = current + v * config.velocityFactor * deltaTime / 1000;\n    animation.velocity = v;\n    animation.lastTimestamp = now;\n    return false;\n  }\n});","lineCount":37,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"rubberBandDecay"],[7,25,1,13],[7,28,1,13,"rubberBandDecay"],[7,43,1,13],[8,2,3,0],[8,6,3,0,"_utils"],[8,12,3,0],[8,15,3,0,"_$$_REQUIRE"],[8,26,3,0],[8,27,3,0,"_dependencyMap"],[8,41,3,0],[9,2,4,0],[9,6,4,6,"DERIVATIVE_EPS"],[9,20,4,20],[9,23,4,23],[9,26,4,26],[10,2,5,7],[10,11,5,16,"rubberBandDecay"],[10,26,5,31,"rubberBandDecay"],[10,27,5,32,"animation"],[10,36,5,41],[10,38,5,43,"now"],[10,41,5,46],[10,43,5,48,"config"],[10,49,5,54],[10,51,5,56],[11,4,6,2],[11,13,6,11],[13,4,8,2],[13,8,9,4,"lastTimestamp"],[13,21,9,17],[13,24,13,6,"animation"],[13,33,13,15],[13,34,9,4,"lastTimestamp"],[13,47,9,17],[14,6,10,4,"startTimestamp"],[14,20,10,18],[14,23,13,6,"animation"],[14,32,13,15],[14,33,10,4,"startTimestamp"],[14,47,10,18],[15,6,11,4,"current"],[15,13,11,11],[15,16,13,6,"animation"],[15,25,13,15],[15,26,11,4,"current"],[15,33,11,11],[16,6,12,4,"velocity"],[16,14,12,12],[16,17,13,6,"animation"],[16,26,13,15],[16,27,12,4,"velocity"],[16,35,12,12],[17,4,14,2],[17,8,14,8,"deltaTime"],[17,17,14,17],[17,20,14,20,"Math"],[17,24,14,24],[17,25,14,25,"min"],[17,28,14,28],[17,29,14,29,"now"],[17,32,14,32],[17,35,14,35,"lastTimestamp"],[17,48,14,48],[17,50,14,50],[17,52,14,52],[17,53,14,53],[18,4,15,2],[18,8,15,8,"clampIndex"],[18,18,15,18],[18,21,15,21,"Math"],[18,25,15,25],[18,26,15,26,"abs"],[18,29,15,29],[18,30,15,30,"current"],[18,37,15,37],[18,40,15,40,"config"],[18,46,15,46],[18,47,15,47,"clamp"],[18,52,15,52],[18,53,15,53],[18,54,15,54],[18,55,15,55],[18,56,15,56],[18,59,15,59,"Math"],[18,63,15,63],[18,64,15,64,"abs"],[18,67,15,67],[18,68,15,68,"current"],[18,75,15,75],[18,78,15,78,"config"],[18,84,15,84],[18,85,15,85,"clamp"],[18,90,15,90],[18,91,15,91],[18,92,15,92],[18,93,15,93],[18,94,15,94],[18,97,15,97],[18,98,15,98],[18,101,15,101],[18,102,15,102],[19,4,16,2],[19,8,16,6,"derivative"],[19,18,16,16],[19,21,16,19],[19,22,16,20],[20,4,17,2],[20,8,17,6,"current"],[20,15,17,13],[20,18,17,16,"config"],[20,24,17,22],[20,25,17,23,"clamp"],[20,30,17,28],[20,31,17,29],[20,32,17,30],[20,33,17,31],[20,37,17,35,"current"],[20,44,17,42],[20,47,17,45,"config"],[20,53,17,51],[20,54,17,52,"clamp"],[20,59,17,57],[20,60,17,58],[20,61,17,59],[20,62,17,60],[20,64,17,62],[21,6,18,4,"derivative"],[21,16,18,14],[21,19,18,17,"current"],[21,26,18,24],[21,29,18,27,"config"],[21,35,18,33],[21,36,18,34,"clamp"],[21,41,18,39],[21,42,18,40,"clampIndex"],[21,52,18,50],[21,53,18,51],[22,4,19,2],[23,4,20,2],[23,8,20,8,"v"],[23,9,20,9],[23,12,20,12,"velocity"],[23,20,20,20],[23,23,20,23,"Math"],[23,27,20,27],[23,28,20,28,"exp"],[23,31,20,31],[23,32,20,32],[23,34,20,34],[23,35,20,35],[23,38,20,38,"config"],[23,44,20,44],[23,45,20,45,"deceleration"],[23,57,20,57],[23,58,20,58],[23,62,20,62,"now"],[23,65,20,65],[23,68,20,68,"startTimestamp"],[23,82,20,82],[23,83,20,83],[23,86,20,86,"SLOPE_FACTOR"],[23,105,20,98],[23,106,20,99],[23,109,20,102,"derivative"],[23,119,20,112],[23,122,20,115,"config"],[23,128,20,121],[23,129,20,122,"rubberBandFactor"],[23,145,20,138],[24,4,21,2],[24,8,21,6,"Math"],[24,12,21,10],[24,13,21,11,"abs"],[24,16,21,14],[24,17,21,15,"derivative"],[24,27,21,25],[24,28,21,26],[24,31,21,29,"DERIVATIVE_EPS"],[24,45,21,43],[24,47,21,45],[25,6,22,4,"animation"],[25,15,22,13],[25,16,22,14,"springActive"],[25,28,22,26],[25,31,22,29],[25,35,22,33],[26,4,23,2],[26,5,23,3],[26,11,23,9],[26,15,23,13,"animation"],[26,24,23,22],[26,25,23,23,"springActive"],[26,37,23,35],[26,39,23,37],[27,6,24,4,"animation"],[27,15,24,13],[27,16,24,14,"current"],[27,23,24,21],[27,26,24,24,"config"],[27,32,24,30],[27,33,24,31,"clamp"],[27,38,24,36],[27,39,24,37,"clampIndex"],[27,49,24,47],[27,50,24,48],[28,6,25,4],[28,13,25,11],[28,17,25,15],[29,4,26,2],[29,5,26,3],[29,11,26,9],[29,15,26,13,"Math"],[29,19,26,17],[29,20,26,18,"abs"],[29,23,26,21],[29,24,26,22,"v"],[29,25,26,23],[29,26,26,24],[29,29,26,27,"VELOCITY_EPS"],[29,48,26,39],[29,50,26,41],[30,6,27,4],[30,13,27,11],[30,17,27,15],[31,4,28,2],[32,4,29,2,"animation"],[32,13,29,11],[32,14,29,12,"current"],[32,21,29,19],[32,24,29,22,"current"],[32,31,29,29],[32,34,29,32,"v"],[32,35,29,33],[32,38,29,36,"config"],[32,44,29,42],[32,45,29,43,"velocityFactor"],[32,59,29,57],[32,62,29,60,"deltaTime"],[32,71,29,69],[32,74,29,72],[32,78,29,76],[33,4,30,2,"animation"],[33,13,30,11],[33,14,30,12,"velocity"],[33,22,30,20],[33,25,30,23,"v"],[33,26,30,24],[34,4,31,2,"animation"],[34,13,31,11],[34,14,31,12,"lastTimestamp"],[34,27,31,25],[34,30,31,28,"now"],[34,33,31,31],[35,4,32,2],[35,11,32,9],[35,16,32,14],[36,2,33,0],[37,0,33,1]],"functionMap":{"names":["<global>","rubberBandDecay"],"mappings":"AAA;OCI;CD4B"}},"type":"js/module"}]}