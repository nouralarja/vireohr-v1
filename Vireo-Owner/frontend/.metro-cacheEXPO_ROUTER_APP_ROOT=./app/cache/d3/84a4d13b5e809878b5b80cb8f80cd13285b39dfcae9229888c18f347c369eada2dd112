{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":54,"column":42,"index":2702}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"../../handlersRegistry","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"pP2b75vhlUpyLI3+QI+xq/8ysKA="}},{"name":"../../../RNGestureHandlerModule","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":69,"index":127}}],"key":"HKrZDPbCxSQpkTuwNBEzcur/N4c="}},{"name":"../../utils","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":128},"end":{"line":3,"column":68,"index":196}}],"key":"dxL+BeUilKexbwMi0xaswBTAv3A="}},{"name":"../../../ghQueueMicrotask","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":197},"end":{"line":4,"column":61,"index":258}}],"key":"hrYLKIqWIfT+pKNINxKM7/Pt38o="}},{"name":"./utils","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":259},"end":{"line":5,"column":99,"index":358}}],"key":"FH4oXkS7WdR5kG0v+Eku8TWcu80="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.updateHandlers = updateHandlers;\n  var _handlersRegistry = _$$_REQUIRE(_dependencyMap[1], \"../../handlersRegistry\");\n  var _RNGestureHandlerModule = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"../../../RNGestureHandlerModule\"));\n  var _utils = _$$_REQUIRE(_dependencyMap[3], \"../../utils\");\n  var _ghQueueMicrotask = _$$_REQUIRE(_dependencyMap[4], \"../../../ghQueueMicrotask\");\n  var _utils2 = _$$_REQUIRE(_dependencyMap[5], \"./utils\");\n  function updateHandlers(preparedGesture, gestureConfig, newGestures) {\n    gestureConfig.prepare();\n    for (var i = 0; i < newGestures.length; i++) {\n      var handler = preparedGesture.attachedGestures[i];\n      (0, _utils2.checkGestureCallbacksForWorklets)(handler); // Only update handlerTag when it's actually different, it may be the same\n      // if gesture config object is wrapped with useMemo\n\n      if (newGestures[i].handlerTag !== handler.handlerTag) {\n        newGestures[i].handlerTag = handler.handlerTag;\n        newGestures[i].handlers.handlerTag = handler.handlerTag;\n      }\n    } // Use queueMicrotask to extract handlerTags, because when it's ran, all refs should be updated\n    // and handlerTags in BaseGesture references should be updated in the loop above (we need to wait\n    // in case of external relations)\n\n    (0, _ghQueueMicrotask.ghQueueMicrotask)(function () {\n      if (!preparedGesture.isMounted) {\n        return;\n      } // If amount of gesture configs changes, we need to update the callbacks in shared value\n\n      var shouldUpdateSharedValueIfUsed = preparedGesture.attachedGestures.length !== newGestures.length;\n      for (var _i = 0; _i < newGestures.length; _i++) {\n        var _handler = preparedGesture.attachedGestures[_i]; // If the gestureId is different (gesture isn't wrapped with useMemo or its dependencies changed),\n        // we need to update the shared value, assuming the gesture runs on UI thread or the thread changed\n\n        if (_handler.handlers.gestureId !== newGestures[_i].handlers.gestureId && (newGestures[_i].shouldUseReanimated || _handler.shouldUseReanimated)) {\n          shouldUpdateSharedValueIfUsed = true;\n        }\n        _handler.config = newGestures[_i].config;\n        _handler.handlers = newGestures[_i].handlers;\n        _RNGestureHandlerModule.default.updateGestureHandler(_handler.handlerTag, (0, _utils.filterConfig)(_handler.config, _utils2.ALLOWED_PROPS, (0, _utils2.extractGestureRelations)(_handler)));\n        (0, _handlersRegistry.registerHandler)(_handler.handlerTag, _handler, _handler.config.testId);\n      }\n      if (preparedGesture.animatedHandlers && shouldUpdateSharedValueIfUsed) {\n        var newHandlersValue = preparedGesture.attachedGestures.filter(function (g) {\n          return g.shouldUseReanimated;\n        }) // Ignore gestures that shouldn't run on UI\n        .map(function (g) {\n          return g.handlers;\n        });\n        preparedGesture.animatedHandlers.value = newHandlersValue;\n      }\n      (0, _utils.scheduleFlushOperations)();\n    });\n  }\n});","lineCount":57,"map":[[7,2,1,0],[7,6,1,0,"_handlersRegistry"],[7,23,1,0],[7,26,1,0,"_$$_REQUIRE"],[7,37,1,0],[7,38,1,0,"_dependencyMap"],[7,52,1,0],[8,2,2,0],[8,6,2,0,"_RNGestureHandlerModule"],[8,29,2,0],[8,32,2,0,"_interopRequireDefault"],[8,54,2,0],[8,55,2,0,"_$$_REQUIRE"],[8,66,2,0],[8,67,2,0,"_dependencyMap"],[8,81,2,0],[9,2,3,0],[9,6,3,0,"_utils"],[9,12,3,0],[9,15,3,0,"_$$_REQUIRE"],[9,26,3,0],[9,27,3,0,"_dependencyMap"],[9,41,3,0],[10,2,4,0],[10,6,4,0,"_ghQueueMicrotask"],[10,23,4,0],[10,26,4,0,"_$$_REQUIRE"],[10,37,4,0],[10,38,4,0,"_dependencyMap"],[10,52,4,0],[11,2,5,0],[11,6,5,0,"_utils2"],[11,13,5,0],[11,16,5,0,"_$$_REQUIRE"],[11,27,5,0],[11,28,5,0,"_dependencyMap"],[11,42,5,0],[12,2,6,7],[12,11,6,16,"updateHandlers"],[12,25,6,30,"updateHandlers"],[12,26,6,31,"preparedGesture"],[12,41,6,46],[12,43,6,48,"gestureConfig"],[12,56,6,61],[12,58,6,63,"newGestures"],[12,69,6,74],[12,71,6,76],[13,4,7,2,"gestureConfig"],[13,17,7,15],[13,18,7,16,"prepare"],[13,25,7,23],[13,26,7,24],[13,27,7,25],[14,4,9,2],[14,9,9,7],[14,13,9,11,"i"],[14,14,9,12],[14,17,9,15],[14,18,9,16],[14,20,9,18,"i"],[14,21,9,19],[14,24,9,22,"newGestures"],[14,35,9,33],[14,36,9,34,"length"],[14,42,9,40],[14,44,9,42,"i"],[14,45,9,43],[14,47,9,45],[14,49,9,47],[15,6,10,4],[15,10,10,10,"handler"],[15,17,10,17],[15,20,10,20,"preparedGesture"],[15,35,10,35],[15,36,10,36,"attachedGestures"],[15,52,10,52],[15,53,10,53,"i"],[15,54,10,54],[15,55,10,55],[16,6,11,4],[16,10,11,4,"checkGestureCallbacksForWorklets"],[16,50,11,36],[16,52,11,37,"handler"],[16,59,11,44],[16,60,11,45],[16,61,11,46],[16,62,11,47],[17,6,12,4],[19,6,14,4],[19,10,14,8,"newGestures"],[19,21,14,19],[19,22,14,20,"i"],[19,23,14,21],[19,24,14,22],[19,25,14,23,"handlerTag"],[19,35,14,33],[19,40,14,38,"handler"],[19,47,14,45],[19,48,14,46,"handlerTag"],[19,58,14,56],[19,60,14,58],[20,8,15,6,"newGestures"],[20,19,15,17],[20,20,15,18,"i"],[20,21,15,19],[20,22,15,20],[20,23,15,21,"handlerTag"],[20,33,15,31],[20,36,15,34,"handler"],[20,43,15,41],[20,44,15,42,"handlerTag"],[20,54,15,52],[21,8,16,6,"newGestures"],[21,19,16,17],[21,20,16,18,"i"],[21,21,16,19],[21,22,16,20],[21,23,16,21,"handlers"],[21,31,16,29],[21,32,16,30,"handlerTag"],[21,42,16,40],[21,45,16,43,"handler"],[21,52,16,50],[21,53,16,51,"handlerTag"],[21,63,16,61],[22,6,17,4],[23,4,18,2],[23,5,18,3],[23,6,18,4],[24,4,19,2],[25,4,20,2],[27,4,23,2],[27,8,23,2,"ghQueueMicrotask"],[27,42,23,18],[27,44,23,19],[27,56,23,25],[28,6,24,4],[28,10,24,8],[28,11,24,9,"preparedGesture"],[28,26,24,24],[28,27,24,25,"isMounted"],[28,36,24,34],[28,38,24,36],[29,8,25,6],[30,6,26,4],[30,7,26,5],[30,8,26,6],[32,6,29,4],[32,10,29,8,"shouldUpdateSharedValueIfUsed"],[32,39,29,37],[32,42,29,40,"preparedGesture"],[32,57,29,55],[32,58,29,56,"attachedGestures"],[32,74,29,72],[32,75,29,73,"length"],[32,81,29,79],[32,86,29,84,"newGestures"],[32,97,29,95],[32,98,29,96,"length"],[32,104,29,102],[33,6,31,4],[33,11,31,9],[33,15,31,13,"i"],[33,17,31,14],[33,20,31,17],[33,21,31,18],[33,23,31,20,"i"],[33,25,31,21],[33,28,31,24,"newGestures"],[33,39,31,35],[33,40,31,36,"length"],[33,46,31,42],[33,48,31,44,"i"],[33,50,31,45],[33,52,31,47],[33,54,31,49],[34,8,32,6],[34,12,32,12,"handler"],[34,20,32,19],[34,23,32,22,"preparedGesture"],[34,38,32,37],[34,39,32,38,"attachedGestures"],[34,55,32,54],[34,56,32,55,"i"],[34,58,32,56],[34,59,32,57],[34,60,32,58],[34,61,32,59],[35,8,33,6],[37,8,35,6],[37,12,35,10,"handler"],[37,20,35,17],[37,21,35,18,"handlers"],[37,29,35,26],[37,30,35,27,"gestureId"],[37,39,35,36],[37,44,35,41,"newGestures"],[37,55,35,52],[37,56,35,53,"i"],[37,58,35,54],[37,59,35,55],[37,60,35,56,"handlers"],[37,68,35,64],[37,69,35,65,"gestureId"],[37,78,35,74],[37,83,35,79,"newGestures"],[37,94,35,90],[37,95,35,91,"i"],[37,97,35,92],[37,98,35,93],[37,99,35,94,"shouldUseReanimated"],[37,118,35,113],[37,122,35,117,"handler"],[37,130,35,124],[37,131,35,125,"shouldUseReanimated"],[37,150,35,144],[37,151,35,145],[37,153,35,147],[38,10,36,8,"shouldUpdateSharedValueIfUsed"],[38,39,36,37],[38,42,36,40],[38,46,36,44],[39,8,37,6],[40,8,39,6,"handler"],[40,16,39,13],[40,17,39,14,"config"],[40,23,39,20],[40,26,39,23,"newGestures"],[40,37,39,34],[40,38,39,35,"i"],[40,40,39,36],[40,41,39,37],[40,42,39,38,"config"],[40,48,39,44],[41,8,40,6,"handler"],[41,16,40,13],[41,17,40,14,"handlers"],[41,25,40,22],[41,28,40,25,"newGestures"],[41,39,40,36],[41,40,40,37,"i"],[41,42,40,38],[41,43,40,39],[41,44,40,40,"handlers"],[41,52,40,48],[42,8,41,6,"RNGestureHandlerModule"],[42,39,41,28],[42,40,41,29,"updateGestureHandler"],[42,60,41,49],[42,61,41,50,"handler"],[42,69,41,57],[42,70,41,58,"handlerTag"],[42,80,41,68],[42,82,41,70],[42,86,41,70,"filterConfig"],[42,105,41,82],[42,107,41,83,"handler"],[42,115,41,90],[42,116,41,91,"config"],[42,122,41,97],[42,124,41,99,"ALLOWED_PROPS"],[42,145,41,112],[42,147,41,114],[42,151,41,114,"extractGestureRelations"],[42,182,41,137],[42,184,41,138,"handler"],[42,192,41,145],[42,193,41,146],[42,194,41,147],[42,195,41,148],[43,8,42,6],[43,12,42,6,"registerHandler"],[43,45,42,21],[43,47,42,22,"handler"],[43,55,42,29],[43,56,42,30,"handlerTag"],[43,66,42,40],[43,68,42,42,"handler"],[43,76,42,49],[43,78,42,51,"handler"],[43,86,42,58],[43,87,42,59,"config"],[43,93,42,65],[43,94,42,66,"testId"],[43,100,42,72],[43,101,42,73],[44,6,43,4],[45,6,45,4],[45,10,45,8,"preparedGesture"],[45,25,45,23],[45,26,45,24,"animatedHandlers"],[45,42,45,40],[45,46,45,44,"shouldUpdateSharedValueIfUsed"],[45,75,45,73],[45,77,45,75],[46,8,46,6],[46,12,46,12,"newHandlersValue"],[46,28,46,28],[46,31,46,31,"preparedGesture"],[46,46,46,46],[46,47,46,47,"attachedGestures"],[46,63,46,63],[46,64,46,64,"filter"],[46,70,46,70],[46,71,46,71],[46,81,46,71,"g"],[46,82,46,72],[47,10,46,72],[47,17,46,76,"g"],[47,18,46,77],[47,19,46,78,"shouldUseReanimated"],[47,38,46,97],[48,8,46,97],[48,10,46,98],[48,11,46,99],[49,8,46,99],[49,9,47,7,"map"],[49,12,47,10],[49,13,47,11],[49,23,47,11,"g"],[49,24,47,12],[50,10,47,12],[50,17,47,16,"g"],[50,18,47,17],[50,19,47,18,"handlers"],[50,27,47,26],[51,8,47,26],[51,10,47,27],[52,8,48,6,"preparedGesture"],[52,23,48,21],[52,24,48,22,"animatedHandlers"],[52,40,48,38],[52,41,48,39,"value"],[52,46,48,44],[52,49,48,47,"newHandlersValue"],[52,65,48,63],[53,6,49,4],[54,6,51,4],[54,10,51,4,"scheduleFlushOperations"],[54,40,51,27],[54,42,51,28],[54,43,51,29],[55,4,52,2],[55,5,52,3],[55,6,52,4],[56,2,53,0],[57,0,53,1]],"functionMap":{"names":["<global>","updateHandlers","ghQueueMicrotask$argument_0","preparedGesture.attachedGestures.filter$argument_0","preparedGesture.attachedGestures.filter.map$argument_0"],"mappings":"AAA;OCK;mBCiB;uECuB,0BD;WEC,eF;GDK;CDC"}},"type":"js/module"}]}